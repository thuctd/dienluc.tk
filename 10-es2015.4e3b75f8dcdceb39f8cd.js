(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jkDv:function(t,e,i){"use strict";i.r(e),i.d(e,"AdminModule",(function(){return I}));var s=i("bSW0"),c=i("ofXK"),n=i("COeT"),r=i("3Pt+"),b=i("Kj3r"),a=i("fXoL");function o(t,e){if(1&t){const t=a.Ub();a.Tb(0,"tr"),a.Tb(1,"td"),a.Tb(2,"i",9),a.bc("click",(function(){a.uc(t);const i=e.$implicit;return a.fc().del(i._id)})),a.Sb(),a.Sb(),a.Tb(3,"td"),a.Cc(4),a.Sb(),a.Tb(5,"td"),a.Cc(6),a.Sb(),a.Tb(7,"td"),a.Cc(8),a.gc(9,"date"),a.Sb(),a.Tb(10,"td",7),a.Cc(11),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit;a.Cb(4),a.Dc(t.api),a.Cb(2),a.Dc(t.ip),a.Cb(2),a.Dc(a.ic(9,4,t.date,"dd/MM/yyyy HH:MM")),a.Cb(3),a.Dc(t.data)}}let l=(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.api="log",this.data=[],this.searchForm=this.fb.group({what:["",[r.q.minLength(3),r.q.maxLength(100)]]})}ngOnInit(){this.init(),this.find()}init(){this.plus.httpGet(this.api).subscribe(t=>{const e=this.plus.decrypt(t.data);this.data=this.plus.sortArr(e,"date")})}del(t){this.plus.httpDelete(this.api,t).subscribe(t=>{console.log(t),this.plus.alertSuccess()})}find(){this.searchForm.valid?this.searchForm.valueChanges.pipe(Object(b.a)(1500)).subscribe(t=>{t.what=this.plus.removeAccents(t.what),this.plus.httpPost(this.api+"/find",t).subscribe(t=>{const e=this.plus.decrypt(t.data);console.log(e),this.data=this.plus.decrypt(t.data)},t=>{this.plus.loaded(),this.plus.alertToasrt({err:"L\u1ed7i k\u1ebft n\u1ed1i\nVui l\xf2ng th\u1eed l\u1ea1i!"})})}):this.plus.alertToasrt({war:"B\u1ea1n c\u1ea7n nh\u1eadp nhi\u1ec1u h\u01a1n 3 k\xfd t\u1ef1"})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.a),a.Nb(r.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-log"]],decls:20,vars:2,consts:[[1,"container"],[1,"text-center","text-danger"],[1,"form-group",3,"formGroup"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin c\u1ea7n t\xecm","autocomplete","on","formControlName","what",1,"form-control",3,"change"],[1,"table","table-hover"],[1,"thead-inverse"],[1,"w-10"],[1,"w-70"],[4,"ngFor","ngForOf"],[1,"fa","fa-trash",3,"click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"h5",1),a.Cc(2," LOG "),a.Sb(),a.Tb(3,"div",2),a.Tb(4,"input",3),a.bc("change",(function(){return e.find()})),a.Sb(),a.Sb(),a.Tb(5,"table",4),a.Tb(6,"thead",5),a.Tb(7,"tr"),a.Tb(8,"th",6),a.Cc(9,"Del"),a.Sb(),a.Tb(10,"th",6),a.Cc(11,"Ip"),a.Sb(),a.Tb(12,"th",6),a.Cc(13,"Api"),a.Sb(),a.Tb(14,"th",6),a.Cc(15,"Time"),a.Sb(),a.Tb(16,"th",7),a.Cc(17,"Data"),a.Sb(),a.Sb(),a.Sb(),a.Tb(18,"tbody"),a.Ac(19,o,12,7,"tr",8),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Cb(3),a.lc("formGroup",e.searchForm),a.Cb(16),a.lc("ngForOf",e.data))},directives:[r.j,r.e,r.b,r.i,r.d,c.l],pipes:[c.d],styles:[""]}),t})();var h=i("tyNb");let u=(()=>{class t{constructor(t){this.plus=t,this.db=null,this.api="admin"}ngOnInit(){this.plus.IDB_InitDB(this.api).subscribe(t=>{this.db=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-admin"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})();var p=function(t){return t[t.ADMIN=1]="ADMIN",t[t.PERSON=2]="PERSON",t[t.EMAIL=3]="EMAIL",t[t.DAOTAO=4]="DAOTAO",t[t.VERHICLE=5]="VERHICLE",t}({}),d=i("AytR");function f(t,e){if(1&t){const t=a.Ub();a.Tb(0,"tr"),a.Tb(1,"th",11),a.Cc(2),a.Sb(),a.Tb(3,"td"),a.Cc(4),a.Sb(),a.Tb(5,"td"),a.Cc(6),a.Sb(),a.Tb(7,"td"),a.Cc(8),a.Sb(),a.Tb(9,"td"),a.Tb(10,"input",12),a.bc("click",(function(i){a.uc(t);const s=e.$implicit;return a.fc(3).onSelect(s.api,1,i)})),a.Sb(),a.Sb(),a.Tb(11,"td"),a.Tb(12,"input",12),a.bc("click",(function(i){a.uc(t);const s=e.$implicit;return a.fc(3).onSelect(s.api,2,i)})),a.Sb(),a.Sb(),a.Tb(13,"td"),a.Tb(14,"input",12),a.bc("click",(function(i){a.uc(t);const s=e.$implicit;return a.fc(3).onSelect(s.api,4,i)})),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,i=a.fc().$implicit,s=a.fc(2);a.Cb(2),a.Ec(" ",i.label," "),a.Cb(2),a.Ec(" ",t.link," "),a.Cb(2),a.Ec(" ",t.label," "),a.Cb(2),a.Ec(" ",t.api," "),a.Cb(2),a.lc("checked",s.checked(t.api,1)),a.Cb(2),a.lc("checked",s.checked(t.api,2)),a.Cb(2),a.lc("checked",s.checked(t.api,4))}}function m(t,e){if(1&t&&(a.Tb(0,"tbody"),a.Ac(1,f,15,7,"tr",10),a.Sb()),2&t){const t=e.$implicit;a.Cb(1),a.lc("ngForOf",t.sub)}}function T(t,e){if(1&t&&(a.Tb(0,"table",8),a.Tb(1,"thead"),a.Tb(2,"tr"),a.Tb(3,"th",9),a.Cc(4,"Module"),a.Sb(),a.Tb(5,"th",9),a.Cc(6,"Link"),a.Sb(),a.Tb(7,"th",9),a.Cc(8,"App"),a.Sb(),a.Tb(9,"th",9),a.Cc(10,"api"),a.Sb(),a.Tb(11,"th",9),a.Cc(12,"Read"),a.Sb(),a.Tb(13,"th",9),a.Cc(14,"Write"),a.Sb(),a.Tb(15,"th",9),a.Cc(16,"Delete"),a.Sb(),a.Sb(),a.Sb(),a.Ac(17,m,2,1,"tbody",10),a.Sb()),2&t){const t=a.fc();a.Cb(17),a.lc("ngForOf",t.permissions)}}let S=(()=>{class t{constructor(t,e,i,s){this.fb=t,this.plus=e,this.route=i,this.location=s,this.PERMISSION=p,this.name="",this.permissions=d.a.nav,this.api="user",this.perUser={}}ngOnInit(){this.getById()}getById(){this.plus.load();const t=this.route.snapshot.paramMap.get("id");this.plus.httpGet("user/"+t).subscribe(t=>{this.user=t,this.perUser=t.opt,this.name=t.displayName+" - "+t.email,console.log(this.user),this.plus.loaded()},t=>this.plus.alertError())}update(){this.user.opt=this.perUser,this.plus.httpPut(this.api,this.user).subscribe(t=>{this.plus.alertToasrt(t)})}onSelect(t,e,i){const s={};if(s[t]=e,i.target.checked)this.perUser=Object.assign(Object.assign({},this.perUser),s);else switch(e){case 1:this.perUser[t]=0;break;case 2:this.perUser[t]=1;break;case 4:this.perUser[t]=2;break;default:this.perUser[t]=0}console.log(this.perUser)}checked(t,e){return!!(this.perUser&&this.perUser[t]>=e)}deletePer(){this.perUser={}}lockUser(){let t=this.user;t.status=0,this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}goBack(){this.location.back()}checkPer(t,e){return this.plus.checkPer(t,e)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.c),a.Nb(n.a),a.Nb(h.a),a.Nb(c.i))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-permission"]],decls:14,vars:2,consts:[[1,"container"],[1,"text-center","text-primary","my-5"],[1,"per2"],["class","table table-hover",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-outline-primary","mx-3",3,"click"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],["type","button",1,"btn","btn-outline-warning","mx-3",3,"click"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-check-input",3,"checked","click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"h4",1),a.Cc(2),a.Sb(),a.Tb(3,"div",2),a.Ac(4,T,18,1,"table",3),a.Tb(5,"div",4),a.Tb(6,"button",5),a.bc("click",(function(){return e.update()})),a.Cc(7,"Save"),a.Sb(),a.Tb(8,"button",5),a.bc("click",(function(){return e.deletePer()})),a.Cc(9,"Clear"),a.Sb(),a.Tb(10,"button",6),a.bc("click",(function(){return e.lockUser()})),a.Cc(11,"Lock"),a.Sb(),a.Tb(12,"button",7),a.bc("click",(function(){return e.goBack()})),a.Cc(13,"Back"),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Cb(2),a.Ec("User: ",e.name,""),a.Cb(2),a.lc("ngIf",e.user))},directives:[c.m,c.l],styles:[""]}),t})();var C=i("tk/3");let g=(()=>{class t{constructor(t,e){this.plus=t,this.http=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("per/"),this.collection="permission"}getPer(){return this.http.get(this.apiUrl,this.httpOptions)}createPer(t){return this.http.post(this.apiUrl,t,this.httpOptions)}updatePer(t){return this.http.put(this.apiUrl,t,this.httpOptions)}deletePer(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(n.a),a.Xb(C.a))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const k=function(t,e){return{"btn-success":t,"btn-danger":e}};function y(t,e){if(1&t){const t=a.Ub();a.Tb(0,"tr"),a.Tb(1,"td"),a.Cc(2),a.Sb(),a.Tb(3,"td"),a.Tb(4,"a",9),a.Cc(5),a.Sb(),a.Sb(),a.Tb(6,"td"),a.Tb(7,"button",10),a.Cc(8),a.Sb(),a.Sb(),a.Tb(9,"td"),a.Cc(10),a.Sb(),a.Tb(11,"td"),a.Tb(12,"i",11),a.bc("click",(function(){a.uc(t);const i=e.$implicit;return a.fc().onEdit(i)})),a.Sb(),a.Cc(13,"\xa0\xa0\xa0\xa0\xa0 "),a.Tb(14,"i",12),a.bc("click",(function(){a.uc(t);const i=e.$implicit;return a.fc().deleteUsr(i._id)})),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit;a.Cb(2),a.Dc(t.usr),a.Cb(2),a.mc("routerLink",t._id),a.Cb(1),a.Dc(t.displayName),a.Cb(2),a.lc("ngClass",a.qc(6,k,1===t.status,1!==t.status)),a.Cb(1),a.Ec(" ",t.status?"On":"Off"," "),a.Cb(2),a.Dc(t.email)}}function v(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",21),a.Tb(1,"label",22),a.Tb(2,"input",29),a.bc("change",(function(i){a.uc(t);const s=e.$implicit;return a.fc(2).changePer(s,i)})),a.Sb(),a.Cc(3),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,i=a.fc(2);a.Cb(2),a.mc("value",t),a.lc("checked",i.userPermiss.includes(t.label)),a.Cb(1),a.Ec(" ",t.label," ")}}function U(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",13),a.Tb(1,"div",14),a.Tb(2,"div",15),a.Tb(3,"div",16),a.Tb(4,"h5",17),a.Cc(5),a.Sb(),a.Tb(6,"button",18),a.Tb(7,"span",19),a.Cc(8,"\xd7"),a.Sb(),a.Sb(),a.Sb(),a.Tb(9,"div",20),a.Tb(10,"div",0),a.Tb(11,"h6"),a.Cc(12,"Quy\u1ec1n truy c\u1eadp:"),a.Sb(),a.Tb(13,"div",21),a.Tb(14,"h6",22),a.Tb(15,"button",23),a.bc("click",(function(){return a.uc(t),a.fc().removeAll()})),a.Cc(16,"Xo\xe1 h\u1ebft quy\u1ec1n "),a.Sb(),a.Sb(),a.Sb(),a.Ac(17,v,4,3,"div",24),a.Tb(18,"div",21),a.Tb(19,"button",25),a.bc("click",(function(){return a.uc(t),a.fc().changeStatus()})),a.Cc(20),a.Sb(),a.Sb(),a.Sb(),a.Tb(21,"div",26),a.Tb(22,"button",27),a.bc("click",(function(){return a.uc(t),a.fc().getUsrs()})),a.Cc(23,"\u0110\xf3ng"),a.Sb(),a.Tb(24,"button",28),a.bc("click",(function(){return a.uc(t),a.fc().update()})),a.Cc(25,"C\u1eadp nh\u1eadt"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(5),a.Dc(t.editUsr.displayName),a.Cb(12),a.lc("ngForOf",t.permissions),a.Cb(2),a.lc("ngClass",a.qc(4,k,1!==t.editUsr.status,1===t.editUsr.status)),a.Cb(1),a.Ec(" ",t.editUsr.status?"Kh\xf3a t\xe0i kho\u1ea3n":"M\u1edf Kh\xf3a"," ")}}const N=[{path:"",component:u},{path:"user",component:(()=>{class t{constructor(t,e,i){this.plus=t,this.perSV=e,this.fb=i,this.api="user/",this.permissions=[],this.userPermiss=[],this.searchForm=this.fb.group({what:["",r.q.minLength(3)]}),this.main=this.fb.group({usr:[,[r.q.required,r.q.min(3),r.q.max(100)]],pwd:[,[r.q.required,r.q.min(8),r.q.max(100)]],level:[,[r.q.min(3),r.q.max(6)]],displayName:[,[r.q.min(3),r.q.max(100)]],email:[,[]],phoneNumber:[,[]],title:[,[]],depart:[,[]],unit:[,[]],note:[,[]],fullName:[,[r.q.min(3),r.q.max(100)]],SoHieuNhanSu:[,[]],BiDanh:[,[]],ChucDanh:[,[]],BoPhanLamViec:[,[]],NoiSinh:[,[]],NguyenQuan:[,[]],ThuongTru:[,[]],NgaySinh:[,[]],GioiTinh:[,[]],DanToc:[,[]],TonGiao:[,[]],SoCMND:[,[]],NgayCapCMND:[,[]],NoiCapCMND:[,[]],NgayVaoNganh:[,[]],TrinhDoCongNhan:[,[]],ChuyenMonChinh:[,[]]})}ngOnInit(){this.getUsrs()}getUsrs(){this.plus.load(),this.plus.httpGet(this.api+"page/1").subscribe(t=>{this.users=t,this.plus.loaded()})}onEdit(t){this.userPermiss=[];const e=t;e.level.forEach(t=>(delete t._id,this.userPermiss.push(t.label))),this.editUsr=e}deleteUsr(t){this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}update(){const t=this.editUsr;delete t.__v,this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t)})}changePer(t,e){if(e.target.checked){const e=this.convertPer(t);return this.editUsr.level.push(e)}this.editUsr.level=this.editUsr.level.filter(e=>e.label!==t.label)}changeStatus(){this.editUsr.status=1===this.editUsr.status?0:1}checkAll(t){this.editUsr.level=t.target.checked?this.permissions:[]}convertPer(t){const e=t;return delete e.dateModify,delete e.canEdit,delete e.keyWord,delete e.userId,delete e.__v,delete e.id,delete e._id,e}removeAll(){this.userPermiss=[],this.editUsr.level=[]}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.a),a.Nb(g),a.Nb(r.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-user-list"]],decls:19,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[1,"text-primary"],[1,"fa","fa-refresh",3,"click"],[4,"ngFor","ngForOf"],["class","modal fade","id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",4,"ngIf"],[3,"routerLink"],["type","button",1,"btn",3,"ngClass"],["data-toggle","modal","data-target","#modelId",1,"fa","fa-pencil","text-success",3,"click"],[1,"fa","fa-trash","text-danger",3,"click"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-check"],[1,"form-check-label"],["type","button",1,"btn","btn-danger",3,"click"],["class","form-check",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"ngClass","click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","checkbox",1,"form-check-input",3,"value","checked","change"]],template:function(t,e){1&t&&(a.Cc(0,"."),a.Tb(1,"div",0),a.Tb(2,"div",1),a.Tb(3,"table",2),a.Tb(4,"thead",3),a.Tb(5,"tr"),a.Tb(6,"th",4),a.Cc(7,"T\xe0i kho\u1ea3n"),a.Sb(),a.Tb(8,"th",4),a.Cc(9,"T\xean"),a.Sb(),a.Tb(10,"th",4),a.Cc(11,"Tr\u1ea1ng th\xe1i"),a.Sb(),a.Tb(12,"th",4),a.Cc(13,"Email"),a.Sb(),a.Tb(14,"th",5),a.Tb(15,"i",6),a.bc("click",(function(){return e.ngOnInit()})),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(16,"tbody"),a.Ac(17,y,15,9,"tr",7),a.Sb(),a.Sb(),a.Ac(18,U,26,7,"div",8),a.Sb(),a.Sb()),2&t&&(a.Cb(17),a.lc("ngForOf",e.users),a.Cb(1),a.lc("ngIf",e.editUsr))},directives:[c.l,c.m,h.d,c.k],styles:[""]}),t})()},{path:"user/:id",component:S},{path:"per",component:S},{path:"log",component:l}];let O=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[h.e.forChild(N)],h.e]}),t})(),I=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.b,O,r.n,s.a,r.f]]}),t})()}}]);