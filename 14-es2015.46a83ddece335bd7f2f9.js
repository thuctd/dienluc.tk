(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Qq7v:function(t,e,i){"use strict";i.r(e),i.d(e,"VehicleModule",(function(){return Tt}));var n=i("ofXK"),s=i("COeT"),c=i("fXoL"),o=i("tk/3");let r=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("settlement/"),this.collection="settlement"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByMonth(t){return this.http.get(this.apiUrl+"getByMonth/"+t,this.httpOptions)}getByIdMonth(t,e){return console.log(t,e),this.http.get(this.apiUrl+"id/"+t+"/month/"+e,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(o.a),c.Xb(s.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("vehicle/"),this.collection="vehicle"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByStatus(){return this.http.get(this.apiUrl,this.httpOptions)}getForOrder(){return this.http.get(this.apiUrl+"order",this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(o.a),c.Xb(s.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=i("3Pt+"),a=i("Kj3r"),h=i("EUZL");function d(t,e){1&t&&(c.Tb(0,"div",8),c.Ob(1,"i",9),c.Sb())}function u(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tbody"),c.Tb(1,"tr"),c.Tb(2,"td",16),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).log(i)})),c.Dc(3),c.Sb(),c.Tb(4,"td"),c.Dc(5),c.Sb(),c.Tb(6,"td"),c.Dc(7),c.gc(8,"number"),c.Sb(),c.Tb(9,"td"),c.Dc(10),c.gc(11,"number"),c.Sb(),c.Tb(12,"td"),c.Tb(13,"button",17),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).delSettlement(i._id)})),c.Ob(14,"i",18),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(3),c.Ec(t.vehicleId.label),c.Cb(2),c.Ec(t.vehicleId.fuel),c.Cb(2),c.Ec(c.hc(8,4,t.used)),c.Cb(3),c.Ec(c.hc(11,6,t.fuelAdvance))}}function p(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",10),c.Tb(1,"h4",11),c.Dc(2,"B\u1ea2NG QUY\u1ebeT TO\xc1N NHI\xcaN LI\u1ec6U "),c.Tb(3,"i",12),c.bc("click",(function(){return c.uc(t),c.fc().download()})),c.Sb(),c.Sb(),c.Tb(4,"table",13),c.Tb(5,"thead",14),c.Tb(6,"tr"),c.Tb(7,"th"),c.Dc(8,"Bi\u1ec3n s\u1ed1 xe"),c.Sb(),c.Tb(9,"th"),c.Dc(10,"Nhi\xean li\u1ec7u s\u1eed d\u1ee5ng"),c.Sb(),c.Tb(11,"th"),c.Dc(12,"S\u1ed1 Km ch\u1ed1t"),c.Sb(),c.Tb(13,"th"),c.Dc(14,"Nhi\xean li\u1ec7u t\u1ea1m \u1ee9ng"),c.Sb(),c.Ob(15,"th"),c.Sb(),c.Sb(),c.Bc(16,u,15,8,"tbody",15),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Cb(16),c.lc("ngForOf",t.vehiclesCheck)}}function m(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td",16),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).log(i)})),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Dc(6),c.Sb(),c.Tb(7,"td"),c.Tb(8,"button",22),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).selectItem(i)})),c.Dc(9,"Ch\u1ed1t km"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.label),c.Cb(2),c.Ec(t.brand),c.Cb(2),c.Ec(t.manager.fullName||t.manager.displayName)}}function f(t,e){if(1&t&&(c.Tb(0,"div",10),c.Tb(1,"H4",19),c.Dc(2,"DANH S\xc1CH CH\u01afA CH\u1ed0T KM"),c.Sb(),c.Tb(3,"table",20),c.Tb(4,"thead",21),c.Tb(5,"tr"),c.Tb(6,"th"),c.Dc(7,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Tb(8,"th"),c.Dc(9,"Hi\u1ec7u xe"),c.Sb(),c.Tb(10,"th"),c.Dc(11,"Ng\u01b0\u1eddi qu\u1ea3n l\xfd"),c.Sb(),c.Ob(12,"th"),c.Sb(),c.Sb(),c.Tb(13,"tbody"),c.Bc(14,m,10,3,"tr",15),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Cb(14),c.lc("ngForOf",t.vehiclesFilter)}}function g(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"h6"),c.Dc(2,"S\u1ed1 gi\u1edd c\u1ea9u "),c.Sb(),c.Tb(3,"input",40),c.bc("input",(function(){return c.uc(t),c.fc(2).used()})),c.Sb(),c.Sb()}}function S(t,e){if(1&t&&(c.Tb(0,"div",41),c.Tb(1,"h6"),c.Dc(2,"S\u1ed1 km th\xe1ng tr\u01b0\u1edbc: "),c.Tb(3,"span",42),c.Dc(4),c.gc(5,"number"),c.Sb(),c.Sb(),c.Ob(6,"hr"),c.Tb(7,"h6"),c.Dc(8),c.Sb(),c.Ob(9,"hr"),c.Tb(10,"h6"),c.Dc(11),c.gc(12,"number"),c.Sb(),c.Sb()),2&t){const t=c.fc(2);c.Cb(4),c.Fc("",c.hc(5,3,t.itemSelected.preUsed)," "),c.Cb(4),c.Fc("S\u1ed1 km th\u1ef1c hi\u1ec7n trong th\xe1ng: ",t.newUsed-t.itemSelected.preUsed||"Ch\u01b0a c\xf3 s\u1ed1 li\u1ec7u",""),c.Cb(3),c.Fc("T\u1ed5ng s\u1ed1 nhi\xean li\u1ec7u \u0111\u01b0\u1ee3c c\u1ea5p: ",c.ic(12,5,(t.newUsed-t.itemSelected.preUsed)*t.itemSelected.quota/100+(t.timeCrane*t.itemSelected.quotaCrane||0),"0.0-1")," l\xedt")}}function T(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",23),c.Tb(1,"div",24),c.Tb(2,"div",25),c.Tb(3,"div",26),c.Tb(4,"h5",27),c.Dc(5),c.Sb(),c.Tb(6,"button",28),c.Tb(7,"span",29),c.Dc(8,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(9,"div",30),c.Tb(10,"form",31),c.Tb(11,"div",32),c.Tb(12,"h6"),c.Dc(13,"S\u1ed1 km:"),c.Sb(),c.Tb(14,"input",33),c.bc("input",(function(){return c.uc(t),c.fc().used()})),c.Sb(),c.Bc(15,g,4,0,"div",34),c.Tb(16,"h6"),c.Dc(17,"S\u1ed1 nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng "),c.Sb(),c.Ob(18,"input",35),c.Ob(19,"hr"),c.Bc(20,S,13,8,"div",36),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",37),c.Tb(22,"button",38),c.bc("click",(function(){return c.uc(t),c.fc().resetModal()})),c.Dc(23,"H\u1ee7y"),c.Sb(),c.Tb(24,"button",39),c.bc("click",(function(){return c.uc(t),c.fc().submit()})),c.Dc(25,"L\u01b0u"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Cb(5),c.Gc("Ch\u1ed1t s\u1ed1 km xe ",t.itemSelected.brand," - ",t.itemSelected.label,""),c.Cb(5),c.lc("formGroup",t.main),c.Cb(5),c.lc("ngIf",t.itemSelected.quotaCrane>0),c.Cb(5),c.lc("ngIf",t.newUsed>0||t.timeCrane>0),c.Cb(4),c.lc("disabled",!t.main.valid)}}let v=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.plus=e,this.vehicleService=i,this.settlementService=n,this.api="settlement/",this.vehicles=[],this.vehiclesFilter=[],this.vehiclesCheck=[],this.loading=!0,this.loadMoreBtn=!1,this.today=this.plus.dateYMD((new Date).toISOString()),this.newUsed=0,this.timeCrane=0,this.data=[[1,2],[3,4]],this.wopts={bookType:"xlsx",type:"array"},this.fileName="SheetJS.xlsx",this.month=null,this.main=this.fb.group({preUsed:[,[l.s.required]],used:[,[l.s.required]],timeCrane:[0,[l.s.max(255)]],fuelAdvance:[0,[]],quotaSet:[,[l.s.required]]}),this.search=this.fb.group({what:["",[l.s.minLength(3),l.s.maxLength(100)]]}),this.dateForm=this.fb.group({date:[this.today,[l.s.required]]})}ngOnInit(){this.getVehicles()}getVehicles(){this.vehicleService.get().subscribe(t=>{t?(this.vehicles=t,this.getVehiclesCheck()):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getVehiclesCheck(){this.loading=!0;const t=this.dateForm.value.date.slice(0,7);this.month=t,console.log(t),this.plus.httpGet(this.api+"getByMonth/"+t).subscribe(t=>{console.log(t),this.plus.alertToasrt(t),t?(this.vehiclesCheck=t,this.vehiclesFilter=this.plus.compareObj(this.vehicles,t),console.log(this.vehiclesFilter)):this.plus.alertToasrt({err:"L\u1ed7i k\u1ebft n\u1ed1i"}),console.log(this.vehiclesCheck),this.loading=!1})}selectItem(t){console.log(t),this.itemSelected=t,this.main.controls.quotaSet.setValue(t.quota),this.main.controls.timeCrane.setValue(0),this.main.controls.fuelAdvance.setValue(0);const e=this.dateForm.get("date").value;this.plus.httpGet(this.api+"id/"+t._id+"/month/"+e).subscribe(t=>{console.log(t),t.length>0?(this.main.controls.preUsed.setValue(t[0].used),this.itemSelected.preUsed=t[0].used):(this.plus.alertToasrt({war:"B\u1ea1n ch\u01b0a ch\u1ed1t s\u1ed1 th\xe1ng tr\u01b0\u1edbc!"}),this.main.controls.preUsed.setValue(0),this.itemSelected.preUsed=0)}),console.log(this.itemSelected)}submit(){const t=this.main.value;t.month=this.dateForm.value.date.slice(0,7),t.vehicleId=this.itemSelected._id;const e=this.plus.generateData(t);console.log("SUBMIT -> ",e),this.plus.httpPost(this.api,e).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit(),this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.itemSelected=null,this.newUsed=0,this.main.reset()}delSettlement(t){confirm("Xo\xe1 m\u1ee5c n\xe0y?")?(this.loading=!0,console.log(t),this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit()})):this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y"})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(a.a)(2e3)).subscribe(t=>{console.log(t),this.loading=!0,t.what=this.plus.removeAccents(t.what),this.vehicleService.find(t).subscribe(t=>{t.length>0&&(this.vehicles=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.vehicles.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.vehicleService.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.vehicles.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}toYM(t){return t.slice(0,6)}used(){this.newUsed=this.main.get("used").value,this.timeCrane=this.main.get("timeCrane").value}log(t){return console.log(t)}download(){const t=JSON.parse(localStorage.getItem("usrInfo"));t.unit&&t.fullName||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"})}export(){this.vehicles.push("asdasasdas");const t=h.utils.table_to_sheet("settlement");console.log(t);const e=h.utils.book_new();h.utils.book_append_sheet(e,t,"Sheet1"),h.writeFile(e,this.fileName)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(l.c),c.Nb(s.a),c.Nb(b),c.Nb(r))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-settlement"]],decls:10,vars:5,consts:[[1,"container"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","date",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],["class","col",4,"ngIf"],["class","modal fade","id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"col"],[1,"text-center","text-success","py-2"],["aria-hidden","true",1,"fa","fa-download","text-primary",3,"click"],["id","settlement",1,"table","table-hover"],[1,"thead-default"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-warning","py-2"],[1,"table","table-hover"],[1,"thead-inverse"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary",3,"click"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["type","number","placeholder","Nh\u1eadp s\u1ed1 km ch\u1ed1t trong th\xe1ng","formControlName","used",1,"form-control",3,"input"],[4,"ngIf"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","fuelAdvance",1,"form-control"],["class","calculator",4,"ngIf"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","timeCrane",1,"form-control",3,"input"],[1,"calculator"],[1,"text-danger","font-weight-bold"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Ob(2,"label",2),c.Dc(3,"Ch\u1ecdn th\xe1ng: "),c.Tb(4,"input",3),c.bc("change",(function(){return e.ngOnInit()})),c.Sb(),c.Sb(),c.Bc(5,d,2,0,"div",4),c.Tb(6,"div",5),c.Bc(7,p,17,1,"div",6),c.Bc(8,f,15,1,"div",6),c.Sb(),c.Sb(),c.Bc(9,T,26,6,"div",7)),2&t&&(c.Cb(1),c.lc("formGroup",e.dateForm),c.Cb(4),c.lc("ngIf",e.loading),c.Cb(2),c.lc("ngIf",e.vehiclesCheck.length>0),c.Cb(1),c.lc("ngIf",e.vehiclesFilter.length>0),c.Cb(1),c.lc("ngIf",e.itemSelected))},directives:[l.k,l.e,l.b,l.j,l.d,n.m,n.l,l.u,l.o],pipes:[n.e],styles:[""]}),t})();var y=i("tyNb");let D=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("order/"),this.collection="order"}get(){return this.http.get(this.apiUrl,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}updateContact(t){return this.http.put(this.apiUrl+"contacts",t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"find",t,this.httpOptions)}getByDate(t){return this.http.post(this.apiUrl+"orderDate",t,this.httpOptions)}wait(t){return this.http.post(this.apiUrl+"wait",t,this.httpOptions)}cancelWait(t){return this.http.delete(this.apiUrl+"wait/"+t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(o.a),c.Xb(s.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class C{}function k(t,e){1&t&&(c.Tb(0,"div",17),c.Ob(1,"i",18),c.Sb())}function O(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",20),c.bc("click",(function(){c.uc(t);const e=c.fc().$implicit;return c.fc(2).compOrder(e)})),c.Dc(1," \u0110i gh\xe9p "),c.Sb()}}function I(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Dc(6),c.Sb(),c.Tb(7,"td"),c.Dc(8),c.Sb(),c.Tb(9,"td"),c.Dc(10),c.Sb(),c.Tb(11,"td"),c.Bc(12,O,2,0,"button",19),c.Sb(),c.Sb()),2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.vehicleId.type),c.Cb(2),c.Ec(t.vehicleId.label),c.Cb(2),c.Ec(t.how),c.Cb(2),c.Ec(t.pointDes||"Xe \u0111ang \u0111\u01b0\u1ee3c ng\u01b0\u1eddi kh\xe1c \u0111\u0103ng k\xfd"),c.Cb(2),c.Ec(1===t.orderStatus?"\u0110\xe3 duy\u1ec7t":"Ch\u1edd duy\u1ec7t"),c.Cb(2),c.lc("ngIf",0===t.orderStatus)}}function x(t,e){if(1&t&&(c.Tb(0,"tbody"),c.Bc(1,I,13,6,"tr",15),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.lc("ngForOf",t.orderList)}}function w(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Tb(6,"button",21),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc().order(i)})),c.Dc(7," \u0110\u0103ng k\xfd "),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit,i=c.fc();c.Cb(2),c.Ec(t.label),c.Cb(2),c.Ec(t.type),c.Cb(2),c.nc("routerLink","/dangkyxe/token/",i.token,"")}}function B(t,e){if(1&t&&(c.Tb(0,"h6"),c.Dc(1),c.Sb()),2&t){const t=e.$implicit;c.Cb(1),c.Ec(t)}}function N(t,e){if(1&t){const t=c.Ub();c.Tb(0,"h6"),c.Dc(1),c.Tb(2,"i",38),c.bc("click",(function(){c.uc(t);const i=e.index;return c.fc(2).delContact(i)})),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(1),c.Fc("",t," ")}}function M(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",22),c.Tb(1,"div",23),c.Tb(2,"div",24),c.Tb(3,"div",25),c.Tb(4,"h5",26),c.Dc(5,"\u0110\u0102NG K\xdd \u0110I GH\xc9P"),c.Sb(),c.Tb(6,"button",27),c.Tb(7,"span",28),c.Dc(8,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(9,"div",29),c.Tb(10,"div",0),c.Tb(11,"div",6),c.Tb(12,"div",12),c.Tb(13,"h6"),c.Dc(14,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),c.Sb(),c.Sb(),c.Tb(15,"div",7),c.Tb(16,"h6"),c.Dc(17),c.Sb(),c.Sb(),c.Ob(18,"hr"),c.Sb(),c.Tb(19,"div",6),c.Tb(20,"div",12),c.Tb(21,"h6"),c.Dc(22,"C\xf4ng t\xe1c:"),c.Sb(),c.Sb(),c.Tb(23,"div",7),c.Tb(24,"h6"),c.Dc(25),c.Sb(),c.Sb(),c.Ob(26,"hr"),c.Sb(),c.Tb(27,"div",6),c.Tb(28,"div",12),c.Tb(29,"h6"),c.Dc(30,"Gi\u1edd \u0111i:"),c.Sb(),c.Sb(),c.Tb(31,"div",7),c.Tb(32,"h6"),c.Dc(33),c.Sb(),c.Sb(),c.Ob(34,"hr"),c.Sb(),c.Tb(35,"div",6),c.Tb(36,"div",12),c.Tb(37,"h6"),c.Dc(38,"Ng\xe0y \u0111i:"),c.Sb(),c.Sb(),c.Tb(39,"div",7),c.Tb(40,"h6"),c.Dc(41),c.gc(42,"date"),c.Sb(),c.Sb(),c.Ob(43,"hr"),c.Sb(),c.Tb(44,"div",6),c.Tb(45,"div",12),c.Tb(46,"h6"),c.Dc(47,"Gi\u1edd v\u1ec1:"),c.Sb(),c.Sb(),c.Tb(48,"div",7),c.Tb(49,"h6"),c.Dc(50),c.Sb(),c.Sb(),c.Ob(51,"hr"),c.Sb(),c.Tb(52,"div",6),c.Tb(53,"div",12),c.Tb(54,"h6"),c.Dc(55,"Ng\xe0y v\u1ec1:"),c.Sb(),c.Sb(),c.Tb(56,"div",7),c.Tb(57,"h6"),c.Dc(58),c.gc(59,"date"),c.Sb(),c.Sb(),c.Ob(60,"hr"),c.Sb(),c.Tb(61,"div",6),c.Tb(62,"div",12),c.Tb(63,"h6"),c.Dc(64,"\u0110i\u1ec3m xu\u1ea5t ph\xe1t:"),c.Sb(),c.Sb(),c.Tb(65,"div",7),c.Tb(66,"h6"),c.Dc(67),c.Sb(),c.Sb(),c.Ob(68,"hr"),c.Sb(),c.Tb(69,"div",6),c.Tb(70,"div",12),c.Tb(71,"h6"),c.Dc(72,"\u0110i\u1ec3m cu\u1ed1i:"),c.Sb(),c.Sb(),c.Tb(73,"div",7),c.Tb(74,"h6"),c.Dc(75),c.Sb(),c.Sb(),c.Ob(76,"hr"),c.Sb(),c.Tb(77,"div",6),c.Tb(78,"div",12),c.Tb(79,"h6"),c.Dc(80,"Li\xean h\u1ec7:"),c.Sb(),c.Sb(),c.Tb(81,"div",7),c.Bc(82,B,2,1,"h6",15),c.Bc(83,N,3,1,"h6",15),c.Tb(84,"form",30),c.Ob(85,"input",31),c.Tb(86,"button",32),c.bc("click",(function(){return c.uc(t),c.fc().addContact()})),c.Dc(87,"Th\xeam li\xean h\u1ec7"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(88,"div",33),c.Tb(89,"button",34),c.bc("click",(function(){return c.uc(t),c.fc().resetModal()})),c.Ob(90,"i",35),c.Sb(),c.Tb(91,"button",36),c.bc("click",(function(){return c.uc(t),c.fc().updateOrderContact()})),c.Ob(92,"i",37),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Cb(17),c.Fc("",t.orderSelected.how," ng\u01b0\u1eddi"),c.Cb(8),c.Ec(t.orderSelected.todo),c.Cb(8),c.Ec(t.orderSelected.timeGo),c.Cb(8),c.Ec(c.ic(42,12,t.orderSelected.dateGo,"dd/MM/yyyy")),c.Cb(9),c.Ec(t.orderSelected.timeBack),c.Cb(8),c.Ec(c.ic(59,15,t.orderSelected.dayBack,"dd/MM/yyyy")),c.Cb(9),c.Ec(t.orderSelected.pointGo),c.Cb(8),c.Ec(t.orderSelected.pointDes),c.Cb(7),c.lc("ngForOf",t.orderSelected.contact),c.Cb(1),c.lc("ngForOf",t.contacts),c.Cb(1),c.lc("formGroup",t.contactForm),c.Cb(7),c.lc("disabled",0===t.contacts.length)}}let G=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.orderSV=e,this.vehicleSV=i,this.fb=n,this.vehicles=[],this.vehiclesWait=[],this.orderList=[],this.loading=!0,this.loadMoreBtn=!1,this.contacts=[],this.api="order/",this.today=this.plus.dateYMD((new Date).toISOString()),this.token=(new Date).getTime()+18e4,this.search=this.fb.group({what:["",[l.s.minLength(3),l.s.maxLength(100)]]}),this.dateForm=this.fb.group({dateGo:[this.today,[l.s.required,l.s.minLength(10),l.s.maxLength(10)]]}),this.contactForm=this.fb.group({pesonnel:["",l.s.required]})}ngOnInit(){this.getVehicles()}find(){this.search.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{this.search.valid&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.orderSV.find(t).subscribe(t=>{t.length>0&&(this.orderList=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1}))})}getVehicles(){this.plus.httpGet("vehicle/order/").subscribe(t=>{t?(this.vehicles=t,this.getOrderDay(this.today)):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getOrders(){const t=this.dateForm.value;this.dateForm.valid&&(this.loading=!0,this.orderList=[],this.plus.httpPost("order/orderDate",t).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)}))}getOrderDay(t){this.plus.httpPost("order/orderDate",{dateGo:t}).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)})}loadMore(){this.loading=!0;const t=Math.ceil(this.orderList.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.orderSV.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.orderList.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}resetModal(){this.contacts=[]}wait(t){this.orderSV.vehicle=t;const e=this.dateForm.value;this.orderSV.dateGo=e.dateGo,this.orderSV.wait({vehicleId:t._id,dateGo:e.dateGo}).subscribe(t=>this.plus.alertToasrt(t))}delWait(t){const e=Date.now();t.length>0&&t.forEach((t,i)=>{3===t.orderStatus&&t.canEdit-e<0&&this.plus.httpDelete("order/wait/",t._id).subscribe(t=>{t.id&&this.getOrders()})})}order(t){const e=this.dateForm.value;e.vehicle=t,e.token=this.token,console.log(e),localStorage.setItem("order",JSON.stringify(e))}compOrder(t){this.orderSelected=t}addContact(){this.contacts.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contacts.splice(t,1)}updateOrderContact(){this.orderSelected.contact=this.contacts.concat(this.orderSelected.contact);const t=this.plus.addKeyWord(this.orderSelected),e=new C;e._id=this.orderSelected._id,e.contact=t.contact,e.keyWord=t.keyWord,this.orderSV.updateContact(e).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")}),this.contacts=[]}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(D),c.Nb(b),c.Nb(l.c))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-order-list"]],decls:41,vars:5,consts:[[1,"container-fluid"],[1,"text-center","bg-warning","py-2","rounded"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","dateGo",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],[1,"col-sm-8"],[1,"text-center","bg-info","py-2","rounded"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[4,"ngIf"],[1,"col-sm-4"],[1,"text-center","bg-success","py-2","rounded"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","modal fade","id","modelId","tabindex","-1",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","button","class","btn btn-outline-success mx-1","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-success","mx-1",3,"click"],["type","button",1,"btn","btn-outline-success",3,"routerLink","click"],["id","modelId","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"contact",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger","mx-2",3,"click"],[1,"fa","fa-times","text-danger"],["type","button",1,"btn","btn-outline-primary","mx-2",3,"disabled","click"],[1,"fa","fa-floppy-o"],[1,"fa","fa-trash","text-danger",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"h4",1),c.Dc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C"),c.Sb(),c.Tb(3,"div",2),c.Ob(4,"label",3),c.Dc(5,"Ch\u1ecdn ng\xe0y \u0111i: "),c.Tb(6,"input",4),c.bc("change",(function(){return e.getOrders()})),c.Sb(),c.Sb(),c.Bc(7,k,2,0,"div",5),c.Tb(8,"div",6),c.Tb(9,"div",7),c.Tb(10,"h5",8),c.Dc(11,"DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd"),c.Sb(),c.Tb(12,"table",9),c.Tb(13,"thead",10),c.Tb(14,"tr"),c.Tb(15,"th"),c.Dc(16,"Lo\u1ea1i xe"),c.Sb(),c.Tb(17,"th"),c.Dc(18,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Tb(19,"th"),c.Dc(20,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),c.Sb(),c.Tb(21,"th"),c.Dc(22,"\u0110i\u1ec3m \u0111\u1ebfn"),c.Sb(),c.Tb(23,"th"),c.Dc(24,"Tr\u1ea1ng th\xe1i"),c.Sb(),c.Ob(25,"th"),c.Sb(),c.Sb(),c.Bc(26,x,2,1,"tbody",11),c.Sb(),c.Sb(),c.Tb(27,"div",12),c.Tb(28,"h5",13),c.Dc(29,"DANH S\xc1CH XE CH\u1edc"),c.Sb(),c.Tb(30,"table",9),c.Tb(31,"thead",10),c.Tb(32,"tr"),c.Tb(33,"th"),c.Dc(34,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Tb(35,"th"),c.Dc(36,"Lo\u1ea1i xe"),c.Sb(),c.Ob(37,"th",14),c.Sb(),c.Sb(),c.Tb(38,"tbody"),c.Bc(39,w,8,3,"tr",15),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Bc(40,M,93,18,"div",16),c.Sb()),2&t&&(c.Cb(3),c.lc("formGroup",e.dateForm),c.Cb(4),c.lc("ngIf",e.loading),c.Cb(19),c.lc("ngIf",e.orderList.length>0),c.Cb(13),c.lc("ngForOf",e.vehiclesWait),c.Cb(1),c.lc("ngIf",e.orderSelected))},directives:[l.k,l.e,l.b,l.j,l.d,n.m,n.l,y.c,l.u,l.q],pipes:[n.d],styles:[""]}),t})();function U(t,e){1&t&&(c.Tb(0,"div",7),c.Ob(1,"i",8),c.Sb())}function L(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",16),c.bc("click",(function(){c.uc(t);const e=c.fc().$implicit;return c.fc(2).onDelete(e)})),c.Ob(1,"i",17),c.Sb()}}function F(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.gc(5,"date"),c.Sb(),c.Tb(6,"td"),c.Dc(7),c.gc(8,"date"),c.Sb(),c.Tb(9,"td"),c.Dc(10),c.Sb(),c.Tb(11,"td",11),c.Tb(12,"button",13),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).download(i)})),c.Ob(13,"i",14),c.Sb(),c.Bc(14,L,2,0,"button",15),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.todo),c.Cb(2),c.Ec(c.ic(5,5,t.dateGo,"dd/MM/yyyy")),c.Cb(3),c.Ec(c.ic(8,8,t.dayBack,"dd/MM/yyyy")),c.Cb(3),c.Ec(t.pointDes),c.Cb(4),c.lc("ngIf",1!==t.orderStatus)}}function E(t,e){if(1&t&&(c.Tb(0,"table",9),c.Tb(1,"thead",10),c.Tb(2,"tr"),c.Tb(3,"th"),c.Dc(4,"C\xf4ng t\xe1c"),c.Sb(),c.Tb(5,"th"),c.Dc(6,"Ng\xe0y \u0111i"),c.Sb(),c.Tb(7,"th"),c.Dc(8,"Ng\xe0y v\u1ec1"),c.Sb(),c.Tb(9,"th"),c.Dc(10,"\u0110i\u1ec3m c\xf4ng t\xe1c"),c.Sb(),c.Ob(11,"th",11),c.Sb(),c.Sb(),c.Tb(12,"tbody"),c.Bc(13,F,15,11,"tr",12),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Cb(13),c.lc("ngForOf",t.datalist)}}function V(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",11),c.Tb(1,"button",18),c.bc("click",(function(){return c.uc(t),c.fc().loadMore()})),c.Dc(2," K\u1ebft qu\u1ea3 kh\xe1c "),c.Sb(),c.Sb()}}const q=function(t){return{loading:t}};let $=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.DB=e,this.fb=i,this.vehicleSV=n,this.vehicles=[],this.loading=!0,this.search=this.fb.group({what:["",[l.s.minLength(3),l.s.maxLength(100)]]})}ngOnInit(){this.getOrders(),this.find()}getOrders(){this.DB.get().subscribe(t=>{this.loading=!1,this.datalist=t,this.plus.alertToasrt(t)})}getVehicles(){this.vehicleSV.get().subscribe(t=>{this.vehicles=t,this.plus.alertToasrt(t)})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(a.a)(1e3)).subscribe(t=>{t.what=this.plus.removeAccents(t.what),this.loading=!0,this.DB.find(t).subscribe(t=>{t.length>0?this.datalist=t.sort((t,e)=>t.dateModify-e.dateModify):this.plus.alertToasrt({msg:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p!"}),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.datalist.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.DB.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.datalist.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}onEdit(t){console.log(t)}onDelete(t){console.log(t),1===t.orderStatus?this.plus.alertToasrt({err:"Vui l\xf2ng kh\xf4ng th\u1ef1c hi\u1ec7n l\u1ea1i! T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb kho\xe1!"}):this.DB.delete(t._id).subscribe(t=>{this.plus.alertToasrt(t),this.getOrders()})}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(D),c.Nb(l.c),c.Nb(b))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-order-manager"]],decls:8,vars:7,consts:[[1,"container"],[1,"text-primary","text-center","bg-white","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control","text-danger",3,"ngClass"],["class","text-center text-primary",4,"ngIf"],["class","table table-hover table-inverse",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[4,"ngFor","ngForOf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"h4",1),c.Dc(2," DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd "),c.Sb(),c.Tb(3,"div",2),c.Ob(4,"input",3),c.Sb(),c.Bc(5,U,2,0,"div",4),c.Bc(6,E,14,1,"table",5),c.Bc(7,V,3,0,"div",6),c.Sb()),2&t&&(c.Cb(3),c.lc("formGroup",e.search),c.Cb(1),c.lc("ngClass",c.pc(5,q,e.loading)),c.Cb(1),c.lc("ngIf",e.loading),c.Cb(1),c.lc("ngIf",e.datalist),c.Cb(1),c.lc("ngIf",e.loadMoreBtn))},directives:[l.k,l.e,l.b,l.j,l.d,n.k,n.m,n.l],pipes:[n.d],styles:[""]}),t})(),H=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-vehicle"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Dc(1,"vehicle works!"),c.Sb())},styles:[""]}),t})();function _(t,e){if(1&t&&(c.Tb(0,"h4",4),c.Dc(1),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.Gc("Lo\u1ea1i xe: ",t.vehicle.type," - Bi\u1ec3n s\u1ed1: ",t.vehicle.label,"")}}function A(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"p"),c.Dc(2),c.Tb(3,"i",23),c.bc("click",(function(){c.uc(t);const i=e.index;return c.fc().delContact(i)})),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit,i=e.index;c.Cb(2),c.Gc("",i+1,"./ ",t," ")}}function j(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",24),c.Tb(1,"button",25),c.bc("click",(function(){return c.uc(t),c.fc().submit()})),c.Ob(2,"i",26),c.Sb(),c.Tb(3,"button",27),c.bc("click",(function(){return c.uc(t),c.fc().back()})),c.Ob(4,"i",28),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Cb(1),c.lc("disabled",!t.main.valid||0===t.contact.length)}}function K(t,e){1&t&&c.Ob(0,"option",29),2&t&&c.mc("value",e.$implicit)}let P=(()=>{class t{constructor(t,e,i,n,s,c,o){this.plus=t,this.DB=e,this.vehicleSV=i,this.fb=n,this.router=s,this.location=c,this.route=o,this.api="order/",this.vehicle=null,this.loading=!0,this.loadMoreBtn=!1,this.dateGo=null,this.contact=[],this.timeOut=!1,this.waitId="",this.token=null,this.over=null,this.time=[],this.main=this.fb.group({how:[,[l.s.required]],todo:[,[l.s.required]],timeGo:[,[l.s.required,l.s.minLength(5)]],dateGo:[,[l.s.required]],timeBack:[,[l.s.required,l.s.minLength(5)]],dayBack:[this.dateGo,[l.s.required]],pointGo:[],pointDes:[,[l.s.required]]}),this.contactForm=this.fb.group({pesonnel:["",l.s.required]})}ngOnInit(){clearInterval(this.over),this.getById(),this.timeInit()}getById(){const t=JSON.parse(localStorage.getItem("order"));if(console.log(t),!t||t.token<Date.now()||t.token-Date.now()>19e4)return this.router.navigate(["/dangkyxe"]);this.token=t.token,this.vehicle=t.vehicle,this.countDown(),this.plus.alertToasrt({msg:"Xe \u0111\u01b0\u1ee3c gi\u1eef cho b\u1ea1n 03 ph\xfat \u0111\u1ec3 ho\xe0n t\u1ea5t th\xf4ng tin!"}),this.main.controls.dateGo.setValue(t.dateGo),this.main.controls.dayBack.setValue(t.dateGo),this.plus.httpPost(this.api+"wait",{vehicleId:t.vehicle._id,dateGo:t.dateGo}).subscribe(t=>{this.waitId=t.id})}addContact(){this.contact.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contact.splice(t,1)}submit(){const t=this.main.value;if(t.vehicleId=this.vehicle._id,t.driverId=this.vehicle.manager._id,t.contact=this.contact,new Date(t.dateGo)>new Date(t.dayBack))this.plus.alertToasrt({war:"Ng\xe0y v\u1ec1 ph\u1ea3i sau ng\xe0y \u0111i"});else{const e=this.plus.generateData(t);console.log(e),this.DB.create(e).subscribe(t=>{t.msg?(this.plus.alertToasrt(t),this.location.back(),clearInterval(this.over)):this.plus.alertToasrt(t)})}}back(){clearInterval(this.over),this.location.back(),this.plus.httpDelete(this.api+"wait/",this.waitId).subscribe(t=>{this.plus.alertToasrt(t)})}countDown(){clearInterval(this.over),this.over=setInterval(()=>{const t=(new Date).getTime(),e=+this.token-t,i=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);this.remain=Math.round(100*(60*i+n)/180),console.log(this.over),localStorage.setItem("over",this.over),e<0&&(clearInterval(this.over),this.back())},2e3)}timeOver(){const t=setTimeout(()=>{clearInterval(this.over),console.log("timeOver()",this.over),this.router.navigate(["/dangkyxe"])},18e4);console.log(t)}timeInit(){const t=[];for(let e=0;e<23;)e<10?(t.push("0"+e+"g00"),t.push("0"+e+"g30")):(t.push(e+"g00"),t.push(e+"g30")),e++;return this.time=t}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(D),c.Nb(b),c.Nb(l.c),c.Nb(y.b),c.Nb(n.i),c.Nb(y.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-order"]],decls:40,vars:8,consts:[[1,"container"],[1,"text-center","bg-warning","py-2","rounded"],["class","font-weight-bold",4,"ngIf"],["id","orderVehicle",3,"formGroup"],[1,"font-weight-bold"],["type","number","placeholder","S\u1ed1 ng\u01b0\u1eddi \u0111i","required","","formControlName","how",1,"form-control","mb-2"],["type","text","placeholder","N\u1ed9i dung c\xf4ng t\xe1c","required","","formControlName","todo",1,"form-control","mb-2"],[1,"row"],[1,"col-sm"],["type","text","list","time","placeholder","VD: 05g30","formControlName","timeGo",1,"form-control","mb-2"],["type","text","list","time","placeholder","VD: 16g30","formControlName","timeBack",1,"form-control","mb-2"],["type","date","placeholder","Ng\xe0y v\u1ec1","required","","formControlName","dayBack",1,"form-control","mb-2"],["type","text","placeholder","\u0110i\u1ec3m \u0111\u1ebfn","autocomplete","on","required","","formControlName","pointDes",1,"form-control","mb-2"],[4,"ngFor","ngForOf"],[1,"contact",3,"formGroup"],["type","text","list","users","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],["id","users"],["class","action my-2 text-center","style","font-size: 24px",4,"ngIf"],[1,"progress","my-2"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated","progress-bar-striped","bg-warning"],["id","time"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-trash","text-danger",3,"click"],[1,"action","my-2","text-center",2,"font-size","24px"],["type","button",1,"btn","btn-primary","mx-2","px-4",2,"font-size","24px",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-floppy-o"],["type","button",1,"btn","btn-second","px-4",2,"font-size","24px",3,"click"],[1,"fa","fa-times","text-danger"],[3,"value"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"h4",1),c.Dc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C "),c.Sb(),c.Bc(3,_,2,2,"h4",2),c.Tb(4,"form",3),c.Tb(5,"label",4),c.Dc(6,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),c.Sb(),c.Ob(7,"input",5),c.Tb(8,"label",4),c.Dc(9,"C\xf4ng t\xe1c"),c.Sb(),c.Ob(10,"input",6),c.Tb(11,"div",7),c.Tb(12,"div",8),c.Tb(13,"label",4),c.Dc(14,"Gi\u1edd \u0111i"),c.Sb(),c.Ob(15,"input",9),c.Sb(),c.Tb(16,"div",8),c.Tb(17,"label",4),c.Dc(18,"Gi\u1edd v\u1ec1"),c.Sb(),c.Ob(19,"input",10),c.Sb(),c.Tb(20,"div",8),c.Tb(21,"label",4),c.Dc(22,"Ng\xe0y v\u1ec1"),c.Sb(),c.Ob(23,"input",11),c.Sb(),c.Sb(),c.Tb(24,"label",4),c.Dc(25,"\u0110\u1ecba \u0111i\u1ec3m c\xf4ng t\xe1c"),c.Sb(),c.Ob(26,"input",12),c.Tb(27,"label",4),c.Dc(28,"Li\xean h\u1ec7"),c.Sb(),c.Bc(29,A,4,2,"div",13),c.Sb(),c.Tb(30,"form",14),c.Ob(31,"input",15),c.Tb(32,"button",16),c.bc("click",(function(){return e.addContact()})),c.Dc(33,"Th\xeam li\xean h\u1ec7"),c.Sb(),c.Sb(),c.Ob(34,"datalist",17),c.Bc(35,j,5,1,"div",18),c.Tb(36,"div",19),c.Ob(37,"div",20),c.Sb(),c.Sb(),c.Tb(38,"datalist",21),c.Bc(39,K,1,1,"option",22),c.Sb()),2&t&&(c.Cb(3),c.lc("ngIf",e.vehicle),c.Cb(1),c.lc("formGroup",e.main),c.Cb(25),c.lc("ngForOf",e.contact),c.Cb(1),c.lc("formGroup",e.contactForm),c.Cb(5),c.lc("ngIf",e.waitId.length>0),c.Cb(2),c.Ac("width",e.remain+"%"),c.Cb(2),c.lc("ngForOf",e.time))},directives:[n.m,l.u,l.k,l.e,l.o,l.b,l.q,l.j,l.d,n.l,l.n,l.t],styles:[""]}),t})();function X(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td",45),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).log(i)})),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Dc(6),c.gc(7,"date"),c.Sb(),c.Tb(8,"td"),c.Dc(9),c.gc(10,"date"),c.Sb(),c.Tb(11,"td"),c.Dc(12),c.gc(13,"number"),c.Sb(),c.Tb(14,"td"),c.Tb(15,"button",46),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).editItem(i)})),c.Ob(16,"i",47),c.Sb(),c.Tb(17,"button",48),c.bc("click",(function(){c.uc(t);const i=e.$implicit,n=e.index;return c.fc(2).delItem(i._id,n)})),c.Ob(18,"i",49),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.vehicleId.label),c.Cb(2),c.Ec(t.regType),c.Cb(2),c.Ec(c.ic(7,5,t.fromDate,"dd/MM/yyyy")),c.Cb(3),c.Ec(c.ic(10,8,t.toDate,"dd/MM/yyyy")),c.Cb(3),c.Ec(c.hc(13,11,t.cost))}}function Y(t,e){if(1&t&&(c.Tb(0,"tbody"),c.Bc(1,X,19,13,"tr",44),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.lc("ngForOf",t.DBlist)}}function W(t,e){1&t&&(c.Tb(0,"div",50),c.Ob(1,"i",51),c.Sb())}function J(t,e){if(1&t&&(c.Tb(0,"span"),c.Dc(1),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.Fc(" ",t.itemSelected.vehicleId.label,"")}}function z(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Dc(6),c.Sb(),c.Tb(7,"td"),c.Tb(8,"button",13),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(3).selectVehicle(i)})),c.Dc(9,"Ch\u1ecdn"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.label),c.Cb(2),c.Ec(t.type),c.Cb(2),c.Ec(t.brand)}}function R(t,e){if(1&t&&(c.Tb(0,"table",4),c.Tb(1,"thead",5),c.Tb(2,"tr"),c.Tb(3,"th"),c.Dc(4,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Tb(5,"th"),c.Dc(6,"Lo\u1ea1i xe"),c.Sb(),c.Tb(7,"th"),c.Dc(8,"Hi\u1ec7u xe"),c.Sb(),c.Ob(9,"th"),c.Sb(),c.Sb(),c.Tb(10,"tbody"),c.Bc(11,z,10,3,"tr",44),c.Sb(),c.Sb()),2&t){const t=c.fc(2);c.Cb(11),c.lc("ngForOf",t.vehicleList)}}const Q=function(t){return{loading:t}};function Z(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",2),c.Tb(1,"input",52),c.bc("change",(function(){return c.uc(t),c.fc().getVehicles()})),c.Sb(),c.Bc(2,R,12,1,"table",53),c.Sb()}if(2&t){const t=c.fc();c.lc("formGroup",t.searchVehicle),c.Cb(1),c.lc("ngClass",c.pc(3,Q,t.loading)),c.Cb(1),c.lc("ngIf",t.vehicleList.length>0)}}function tt(t,e){if(1&t&&(c.Tb(0,"div",27),c.Tb(1,"div",28),c.Tb(2,"h6"),c.Dc(3,"Xe:"),c.Sb(),c.Sb(),c.Tb(4,"div",29),c.Dc(5," \xa0"),c.Tb(6,"h6"),c.Dc(7),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Cb(7),c.Gc("",t.vehicleSelected.label," - ",t.vehicleSelected.brand,"")}}let et=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.vehicleSV=e,this.fb=i,this.route=n,this.api="registry/",this.loading=!0,this.DBlist=[],this.vehicleList=[],this.vehicleSelected=null,this.today=this.plus.dateYMD((new Date).toISOString()),this.main=this.fb.group({_id:[,[]],vehicleId:[,[l.s.required]],regType:[,[l.s.required]],fromDate:[,[l.s.required]],toDate:[,[l.s.required]],cost:[,[]]}),this.search=this.fb.group({what:["",[l.s.minLength(4),l.s.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[l.s.minLength(4),l.s.maxLength(100)]]})}ngOnInit(){this.getReg(),this.find(),this.getVehicles()}getReg(){this.plus.httpPost(this.api+"find",{page:1}).subscribe(t=>{this.plus.alertToasrt(t),this.DBlist=t,this.loading=!1})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost(this.api+"find",t).subscribe(t=>{this.loading=!1,t.length>0&&(this.DBlist=t)})})}submit(){const t=this.plus.generateData(this.main.value);t._id?this.update(t):this.create(t),this.resetModal(),this.ngOnInit()}create(t){this.plus.httpPost(this.api,t).subscribe(e=>{this.plus.alertToasrt(e),e.msg&&(this.DBlist.push(t),this.plus.sortArr(this.DBlist,"dateModify"),this.resetModal()),this.getReg()})}update(t){this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.main.reset(),this.itemSelected=null,this.vehicleList=[]}loadMore(){const t=Math.ceil(this.DBlist.length/10)+1;this.plus.httpPost(this.api+"find",{page:t}).subscribe(t=>{t.length>0?t.forEach(t=>{this.DBlist.push(t)}):this.plus.alertToasrt({msg:"Kh\xf4ng\xa0c\xf2n\xa0k\u1ebft\xa0qu\u1ea3\xa0ph\xf9\xa0h\u1ee3p\xa0\n\xa0Nh\u1eadp\xa0n\u1ed9i\xa0dung\xa0c\u1ea7n\xa0t\xecm\xa0c\u1ee5\xa0th\u1ec3\xa0h\u01a1n"}),this.loading=!1})}addItem(){this.resetModal(),this.plus.clickBtn("openModal")}editItem(t){const e=t;this.itemSelected=e,e.fromDate=this.plus.UTCtoYMD(e.fromDate),e.toDate=this.plus.UTCtoYMD(e.toDate),this.main.patchValue(t),this.plus.clickBtn("openModal"),console.log(e)}delItem(t,e){this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.DBlist.splice(e,1)})}getVehicles(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,t.length>0?this.vehicleList=t:this.plus.alertToasrt({war:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"})})})}selectVehicle(t){console.log(t),this.main.controls.vehicleId.setValue(t._id),this.vehicleSelected=t,this.vehicleList=[]}log(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(b),c.Nb(l.c),c.Nb(y.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-registry"]],decls:90,vars:11,consts:[[1,"container"],[1,"text-primary","text-center","bg-light","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control",3,"ngClass"],[1,"table","table-hover"],[1,"thead-default"],["type","button",1,"btn","btn-success","mx-1",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[4,"ngIf"],["class","text-center text-primary",4,"ngIf"],[1,"loadMore","text-center","my-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#modelId"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["myModal",""],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"form-group"],["formControlName","regType",1,"form-control"],["value","\u0110\u0103ng ki\u1ec3m"],["value","C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"],["value","B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"],["value","B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"],["value","Ph\xed VTEC"],[1,"row","form-group"],["type","date","formControlName","fromDate",1,"form-control"],["type","date","formControlName","toDate",1,"form-control"],["type","number","formControlName","cost",1,"form-control"],[1,"modal-footer"],["id","closeModal","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","text","required","","formControlName","what","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n t\xecm v\xe0 ch\u1ecdn",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"h4",1),c.Dc(2," H\u1ea0N D\xd9NG Y\xcaU C\u1ea6U "),c.Sb(),c.Tb(3,"div",2),c.Ob(4,"input",3),c.Sb(),c.Tb(5,"table",4),c.Tb(6,"thead",5),c.Tb(7,"tr"),c.Tb(8,"th"),c.Dc(9,"Xe"),c.Sb(),c.Tb(10,"th"),c.Dc(11,"Lo\u1ea1i h\u1ed3 s\u01a1"),c.Sb(),c.Tb(12,"th"),c.Dc(13,"Ng\xe0y s\u1eed d\u1ee5ng"),c.Sb(),c.Tb(14,"th"),c.Dc(15,"Ng\xe0y h\u1ebft h\u1ea1n"),c.Sb(),c.Tb(16,"th"),c.Dc(17,"S\u1ed1 ti\u1ec1n"),c.Sb(),c.Tb(18,"th"),c.Tb(19,"button",6),c.bc("click",(function(){return e.addItem()})),c.Ob(20,"i",7),c.Sb(),c.Tb(21,"button",8),c.bc("click",(function(){return e.ngOnInit()})),c.Ob(22,"i",9),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Bc(23,Y,2,1,"tbody",10),c.Sb(),c.Bc(24,W,2,0,"div",11),c.Tb(25,"div",12),c.Tb(26,"button",13),c.bc("click",(function(){return e.loadMore()})),c.Dc(27,"Xem th\xeam"),c.Sb(),c.Sb(),c.Sb(),c.Tb(28,"button",14),c.Dc(29,"Modal"),c.Sb(),c.Tb(30,"div",15,16),c.Tb(32,"div",17),c.Tb(33,"div",18),c.Tb(34,"div",19),c.Tb(35,"h5",20),c.Dc(36,"Nh\u1eadp th\xf4ng tin xe "),c.Bc(37,J,2,1,"span",10),c.Sb(),c.Tb(38,"button",21),c.Tb(39,"span",22),c.Dc(40,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(41,"div",23),c.Bc(42,Z,3,5,"div",24),c.Tb(43,"form",25),c.Bc(44,tt,8,2,"div",26),c.Ob(45,"hr"),c.Tb(46,"div",27),c.Tb(47,"div",28),c.Tb(48,"h6"),c.Dc(49,"Lo\u1ea1i h\u1ed3 s\u01a1:"),c.Sb(),c.Sb(),c.Tb(50,"div",29),c.Tb(51,"div",30),c.Tb(52,"select",31),c.Tb(53,"option",32),c.Dc(54,"\u0110\u0103ng ki\u1ec3m"),c.Sb(),c.Tb(55,"option",33),c.Dc(56,"C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"),c.Sb(),c.Tb(57,"option",34),c.Dc(58,"B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"),c.Sb(),c.Tb(59,"option",35),c.Dc(60,"B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"),c.Sb(),c.Tb(61,"option",36),c.Dc(62,"Ph\xed VTEC"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ob(63,"hr"),c.Tb(64,"div",37),c.Tb(65,"div",28),c.Tb(66,"h6"),c.Dc(67,"Ng\xe0y s\u1eed d\u1ee5ng:"),c.Sb(),c.Sb(),c.Tb(68,"div",29),c.Ob(69,"input",38),c.Sb(),c.Sb(),c.Ob(70,"hr"),c.Tb(71,"div",37),c.Tb(72,"div",28),c.Tb(73,"h6"),c.Dc(74,"Ng\xe0y h\u1ebft h\u1ea1n:"),c.Sb(),c.Sb(),c.Tb(75,"div",29),c.Ob(76,"input",39),c.Sb(),c.Sb(),c.Ob(77,"hr"),c.Tb(78,"div",37),c.Tb(79,"div",28),c.Tb(80,"h6"),c.Dc(81,"S\u1ed1 ti\u1ec1n:"),c.Sb(),c.Sb(),c.Tb(82,"div",29),c.Ob(83,"input",40),c.Sb(),c.Sb(),c.Ob(84,"hr"),c.Sb(),c.Sb(),c.Tb(85,"div",41),c.Tb(86,"button",42),c.Dc(87,"H\u1ee7y"),c.Sb(),c.Tb(88,"button",43),c.bc("click",(function(){return e.submit()})),c.Dc(89,"L\u01b0u"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Cb(3),c.lc("formGroup",e.search),c.Cb(1),c.lc("ngClass",c.pc(9,Q,e.loading)),c.Cb(19),c.lc("ngIf",e.DBlist.length>0),c.Cb(1),c.lc("ngIf",e.loading),c.Cb(13),c.lc("ngIf",e.itemSelected),c.Cb(5),c.lc("ngIf",!e.itemSelected),c.Cb(1),c.lc("formGroup",e.main),c.Cb(1),c.lc("ngIf",e.vehicleSelected),c.Cb(44),c.lc("disabled",!e.main.valid))},directives:[l.k,l.e,l.b,l.j,l.d,n.k,n.m,l.u,l.r,l.n,l.t,l.o,n.l,l.q],pipes:[n.d,n.e],styles:[""]}),t})();var it=i("mrSG");function nt(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",43),c.bc("click",(function(){c.uc(t);const e=c.fc(),i=e.$implicit,n=e.index;return c.fc(2).accept(i,n)})),c.Ob(1,"i",44),c.Sb()}}function st(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",45),c.bc("click",(function(){c.uc(t);const e=c.fc().$implicit;return c.fc(2).editItem(e)})),c.Ob(1,"i",46),c.Sb()}}function ct(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",47),c.bc("click",(function(){c.uc(t);const e=c.fc().$implicit;return c.fc(2).changeStatus(e)})),c.Ob(1,"i",48),c.Sb()}}function ot(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Dc(6),c.Sb(),c.Tb(7,"td"),c.Dc(8),c.gc(9,"date"),c.Sb(),c.Tb(10,"td"),c.Dc(11),c.Sb(),c.Tb(12,"td"),c.Bc(13,nt,2,0,"button",38),c.Bc(14,st,2,0,"button",39),c.Tb(15,"button",40),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).download(i)})),c.Ob(16,"i",41),c.Sb(),c.Bc(17,ct,2,0,"button",42),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit,i=c.fc(2);c.Cb(2),c.Ec(t.vehicleId.label),c.Cb(2),c.Ec(t.vehicleId.type),c.Cb(2),c.Ec(t.driverId.fullName||t.driverId.displayName),c.Cb(2),c.Ec(c.ic(9,8,t.dateGo,"dd/MM/yyyy")),c.Cb(3),c.Ec(t.todo),c.Cb(2),c.lc("ngIf",1!==t.orderStatus),c.Cb(1),c.lc("ngIf",1!==t.orderStatus),c.Cb(3),c.lc("ngIf",i.admin)}}function rt(t,e){if(1&t){const t=c.Ub();c.Tb(0,"table",33),c.Tb(1,"thead",34),c.Tb(2,"tr"),c.Tb(3,"th"),c.Dc(4,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Tb(5,"th"),c.Dc(6,"Lo\u1ea1i xe"),c.Sb(),c.Tb(7,"th"),c.Dc(8,"T\xe0i x\u1ebf"),c.Sb(),c.Tb(9,"th"),c.Dc(10,"Ng\xe0y \u0111i"),c.Sb(),c.Tb(11,"th"),c.Dc(12,"C\xf4ng t\xe1c"),c.Sb(),c.Tb(13,"th",35),c.Tb(14,"i",36),c.bc("click",(function(){return c.uc(t),c.fc().ngOnInit()})),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(15,"tbody"),c.Bc(16,ot,18,11,"tr",37),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Cb(16),c.lc("ngForOf",t.dbList)}}function bt(t,e){if(1&t&&(c.Tb(0,"span",49),c.Dc(1),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.Ec(t.vehicleSelected.label)}}function lt(t,e){1&t&&c.Ob(0,"input",50)}function at(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Tb(6,"button",31),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).selectVehicle(i)})),c.Dc(7,"Ch\u1ecdn"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.type),c.Cb(2),c.Ec(t.label)}}function ht(t,e){if(1&t&&(c.Tb(0,"table",33),c.Tb(1,"thead",51),c.Tb(2,"tr"),c.Tb(3,"th"),c.Dc(4,"Lo\u1ea1i xe"),c.Sb(),c.Tb(5,"th"),c.Dc(6,"Bi\u1ec3n s\u1ed1"),c.Sb(),c.Ob(7,"th"),c.Sb(),c.Sb(),c.Tb(8,"tbody"),c.Bc(9,at,8,2,"tr",37),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Cb(9),c.lc("ngForOf",t.vehicleList)}}function dt(t,e){if(1&t&&(c.Tb(0,"span",49),c.Dc(1),c.Sb()),2&t){const t=c.fc();c.Cb(1),c.Ec(t.userSelected.user_Id.fullName)}}function ut(t,e){1&t&&c.Ob(0,"input",52)}function pt(t,e){if(1&t){const t=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Dc(2),c.Sb(),c.Tb(3,"td"),c.Dc(4),c.Sb(),c.Tb(5,"td"),c.Tb(6,"button",31),c.bc("click",(function(){c.uc(t);const i=e.$implicit;return c.fc(2).selectDriver(i)})),c.Dc(7,"Ch\u1ecdn"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Ec(t.user_Id.fullName||"Ch\u01b0a khai b\xe1o"),c.Cb(2),c.Ec(t.level)}}function mt(t,e){if(1&t&&(c.Tb(0,"table",33),c.Tb(1,"thead",51),c.Tb(2,"tr"),c.Tb(3,"th"),c.Dc(4,"H\u1ecd v\xe0 t\xean"),c.Sb(),c.Tb(5,"th"),c.Dc(6,"H\u1ea1ng b\u1eb1ng l\xe1i"),c.Sb(),c.Ob(7,"th"),c.Sb(),c.Sb(),c.Tb(8,"tbody"),c.Bc(9,pt,8,2,"tr",37),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Cb(9),c.lc("ngForOf",t.userList)}}const ft=function(t){return{loading:t}},gt=[{path:"",component:H},{path:"quanlyxe",component:H},{path:"quanlydangkyxe",component:$},{path:"dangkyxe",component:G},{path:"dangkyxe/token/:token",component:P},{path:"quyettoan",component:v},{path:"hansudung/:id",component:et},{path:"hansudung",component:et},{path:"duyetxe",component:(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.api="accept/",this.loading=!0,this.dbList=[],this.userList=[],this.vehicleList=[],this.userSelected=null,this.vehicleSelected=null,this.orderSelected=null,this.admin=this.plus.isAdmin(),this.from=localStorage.getItem("usrInfo"),this.main=this.fb.group({_id:[],vehicleId:[,[l.s.required]],driverId:[,[l.s.required]],how:[,[l.s.required]],todo:[,[l.s.required]],timeGo:[,[]],dateGo:[,[l.s.required]],timeBack:[,[]],dayBack:[,[l.s.required]],pointGo:[,[l.s.required]],pointDes:[,[l.s.required]],contact:[,[]],note:["",l.s.maxLength(100)]}),this.searchForm=this.fb.group({what:["",[l.s.minLength(4),l.s.maxLength(100)]]}),this.searchUser=this.fb.group({what:["",[l.s.minLength(4),l.s.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[l.s.minLength(4),l.s.maxLength(100)]]})}ngOnInit(){this.get(),this.findUser(),this.findVehicle(),this.findOrder()}get(){this.plus.httpGet(this.api+"1").subscribe(t=>{this.dbList=t,this.plus.alertToasrt(t),this.loading=!1})}findOrder(){this.searchForm.valid&&this.searchForm.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("accept/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.dbList=t)}))})}findVehicle(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.vehicleList=t)}))})}findUser(){this.searchUser.valid&&this.searchUser.valueChanges.pipe(Object(a.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.plus.httpPost("driver/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),this.userList=t}))})}selectDriver(t){this.userSelected=t,this.userList=[],console.log(t),this.main.controls.driverId.setValue(t.user_Id._id)}selectVehicle(t){this.vehicleSelected=t,this.vehicleList=[],console.log(t),this.main.controls.vehicleId.setValue(t._id)}changeStatus(t){this.plus.httpPut("order",{_id:t._id,orderStatus:0}).subscribe(t=>{this.plus.alertToasrt(t)})}editItem(t){console.log(t),this.orderSelected=t,this.main.patchValue(t),this.main.controls.vehicleId.setValue(t.vehicleId._id),this.main.controls.driverId.setValue(t.driverId._id),this.plus.clickBtn("openModal")}reset(){this.plus.clickBtn("closeModal"),this.main.reset(),this.searchForm.reset(),this.searchUser.reset(),this.searchVehicle.reset(),this.orderSelected=null,this.userSelected=null,this.vehicleSelected=null}submit(){const t=this.plus.addKeyWord(this.main.value);console.log(t),this.plus.httpPut("order",t).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")})}accept(t,e){console.log(t);const i={title:`Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}.`,email:t.driverId.email,message:`<h4>Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}:</h4>\n      <h4>Lo\u1ea1i xe: ${t.vehicleId.type} - ${t.vehicleId.label}.</h4>\n      <h4>Gi\u1edd \u0111i: ${t.timeGo}.</h4>\n      <h4>C\xf4ng t\xe1c: ${t.todo}.</h4>\n      <h4>\u0110\u1ecba \u0111i\u1ec3m: ${t.pointDes}.</h4>\n      <h4>Li\xean h\u1ec7: ${t.contact.join(", ")}.</h4>\n      `,t0k3n:{user:"tckt.dlxl@gmail.com",pass:"pdhorsgfplhxhecj"}};1===t.orderStatus?(this.plus.alertToasrt({war:"B\u1ea1n \u0111\xe3 duy\u1ec7t xe n\xe0y!"}),this.get()):(this.plus.httpPost(this.api,{id:t._id,orderStatus:1}).subscribe(t=>{this.dbList[e].orderStatus=1,this.plus.alertToasrt(t)}),console.log(i),this.plus.sendMail(i).subscribe(e=>Object(it.__awaiter)(this,void 0,void 0,(function*(){e.email&&(this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho l\xe1i xe"}),yield this.plus.sleep(5e3),i.email=t.userId.email,this.plus.sendMail(i).subscribe(t=>{this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho ng\u01b0\u1eddi \u0111\u0103ng k\xfd xe"})}))}))))}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(l.c))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-acception"]],decls:66,vars:14,consts:[[1,"form-group",3,"formGroup"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","formControlName","what",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#regModal",1,"btn","btn-primary","btn-lg"],["id","regModal","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title","text-center","text-white"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[3,"formGroup"],[1,"form-group"],["class","text-danger",4,"ngIf"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"vehicleList"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"userList"],["type","text","hidden","","formControlName","_id",1,"form-control"],[1,"row","form-group"],[1,"col-sm-4"],[1,"col-sm-8"],["type","number","formControlName","how",1,"form-control"],["rows","2","formControlName","todo",1,"form-control"],["type","text","formControlName","timeGo",1,"form-control"],["rows","3","formControlName","note",1,"form-control"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-floppy-o"],[1,"table","table-hover"],[1,"thead-default"],[1,"text-center","text-primary"],[1,"fa","fa-refresh",3,"click"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-warning mx-1","title","Duy\u1ec7t",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success mx-1",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button","title","Duy\u1ec7t",1,"btn","btn-outline-warning","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-check"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash","text-danger"],[1,"text-danger"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"],[1,"thead-inverse"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"]],template:function(t,e){1&t&&(c.Tb(0,"form",0),c.Tb(1,"input",1),c.bc("change",(function(){return e.findOrder()})),c.Sb(),c.Sb(),c.Bc(2,rt,17,1,"table",2),c.Ob(3,"button",3),c.Tb(4,"div",4),c.Tb(5,"div",5),c.Tb(6,"div",6),c.Tb(7,"div",7),c.Tb(8,"h5",8),c.Dc(9,"Hi\u1ec7u ch\u1ec9nh xe \u0111\u0103ng k\xfd"),c.Sb(),c.Tb(10,"button",9),c.bc("click",(function(){return e.reset()})),c.Tb(11,"span",10),c.Dc(12,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(13,"div",11),c.Tb(14,"div",12),c.Tb(15,"form",13),c.Tb(16,"div",14),c.Tb(17,"h6"),c.Dc(18,"\u0110\u1ed5i xe: "),c.Bc(19,bt,2,1,"span",15),c.Sb(),c.Bc(20,lt,1,0,"input",16),c.Sb(),c.Tb(21,"div",17),c.Bc(22,ht,10,1,"table",2),c.Sb(),c.Sb(),c.Tb(23,"form",13),c.Tb(24,"div",14),c.Tb(25,"h6"),c.Dc(26,"\u0110\u1ed5i t\xe0i x\u1ebf: "),c.Bc(27,dt,2,1,"span",15),c.Sb(),c.Bc(28,ut,1,0,"input",18),c.Sb(),c.Tb(29,"div",19),c.Bc(30,mt,10,1,"table",2),c.Sb(),c.Sb(),c.Tb(31,"form",13),c.Ob(32,"input",20),c.Tb(33,"div",21),c.Tb(34,"div",22),c.Tb(35,"h6"),c.Dc(36,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),c.Sb(),c.Sb(),c.Tb(37,"div",23),c.Ob(38,"input",24),c.Sb(),c.Sb(),c.Ob(39,"hr"),c.Tb(40,"div",21),c.Tb(41,"div",22),c.Tb(42,"h6"),c.Dc(43,"C\xf4ng t\xe1c:"),c.Sb(),c.Sb(),c.Tb(44,"div",23),c.Ob(45,"textarea",25),c.Sb(),c.Sb(),c.Ob(46,"hr"),c.Tb(47,"div",21),c.Tb(48,"div",22),c.Tb(49,"h6"),c.Dc(50,"Gi\u1edd \u0111i:"),c.Sb(),c.Sb(),c.Tb(51,"div",23),c.Ob(52,"input",26),c.Sb(),c.Sb(),c.Ob(53,"hr"),c.Tb(54,"div",21),c.Tb(55,"div",22),c.Tb(56,"h6"),c.Dc(57,"L\u1eddi nh\u1eafn cho l\xe1i xe"),c.Sb(),c.Sb(),c.Tb(58,"div",23),c.Ob(59,"textarea",27),c.Sb(),c.Sb(),c.Ob(60,"hr"),c.Sb(),c.Sb(),c.Sb(),c.Tb(61,"div",28),c.Tb(62,"button",29),c.bc("click",(function(){return e.reset()})),c.Ob(63,"i",30),c.Sb(),c.Tb(64,"button",31),c.bc("click",(function(){return e.submit()})),c.Ob(65,"i",32),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.lc("formGroup",e.searchForm),c.Cb(1),c.lc("ngClass",c.pc(12,ft,e.loading)),c.Cb(1),c.lc("ngIf",e.dbList.length>0),c.Cb(13),c.lc("formGroup",e.searchVehicle),c.Cb(4),c.lc("ngIf",e.vehicleSelected),c.Cb(1),c.lc("ngIf",!e.vehicleSelected),c.Cb(2),c.lc("ngIf",e.vehicleList.length>0),c.Cb(1),c.lc("formGroup",e.searchUser),c.Cb(4),c.lc("ngIf",e.userSelected),c.Cb(1),c.lc("ngIf",!e.userSelected),c.Cb(2),c.lc("ngIf",e.userList.length>0),c.Cb(1),c.lc("formGroup",e.main))},directives:[l.u,l.k,l.e,l.b,l.j,l.d,n.k,n.m,l.o,n.l],pipes:[n.d],styles:[""]}),t})()},{path:"taixe",component:$}];let St=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[y.e.forChild(gt)],y.e]}),t})(),Tt=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[n.b,St,l.p,l.f]]}),t})()}}]);