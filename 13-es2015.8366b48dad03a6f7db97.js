(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Qq7v:function(t,e,i){"use strict";i.r(e),i.d(e,"VehicleModule",(function(){return Tt}));var n=i("ofXK"),c=i("COeT"),s=i("fXoL"),o=i("tk/3");let r=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("settlement/"),this.collection="settlement"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByMonth(t){return this.http.get(this.apiUrl+"getByMonth/"+t,this.httpOptions)}getByIdMonth(t,e){return console.log(t,e),this.http.get(this.apiUrl+"id/"+t+"/month/"+e,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.a),s.Xb(c.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("vehicle/"),this.collection="vehicle"}get(){return this.http.get(this.apiUrl,this.httpOptions)}getByStatus(){return this.http.get(this.apiUrl,this.httpOptions)}getForOrder(){return this.http.get(this.apiUrl+"order",this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"/find",t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.a),s.Xb(c.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=i("3Pt+"),l=i("Kj3r"),h=i("EUZL");function d(t,e){1&t&&(s.Tb(0,"div",8),s.Ob(1,"i",9),s.Sb())}function u(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tbody"),s.Tb(1,"tr"),s.Tb(2,"td",16),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).log(i)})),s.Bc(3),s.Sb(),s.Tb(4,"td"),s.Bc(5),s.Sb(),s.Tb(6,"td"),s.Bc(7),s.fc(8,"number"),s.Sb(),s.Tb(9,"td"),s.Bc(10),s.fc(11,"number"),s.Sb(),s.Tb(12,"td"),s.Tb(13,"button",17),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).delSettlement(i._id)})),s.Ob(14,"i",18),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(3),s.Cc(t.vehicleId.label),s.Cb(2),s.Cc(t.vehicleId.fuel),s.Cb(2),s.Cc(s.gc(8,4,t.used)),s.Cb(3),s.Cc(s.gc(11,6,t.fuelAdvance))}}function p(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",10),s.Tb(1,"h4",11),s.Bc(2,"B\u1ea2NG QUY\u1ebeT TO\xc1N NHI\xcaN LI\u1ec6U "),s.Tb(3,"i",12),s.bc("click",(function(){return s.tc(t),s.ec().download()})),s.Sb(),s.Sb(),s.Tb(4,"table",13),s.Tb(5,"thead",14),s.Tb(6,"tr"),s.Tb(7,"th"),s.Bc(8,"Bi\u1ec3n s\u1ed1 xe"),s.Sb(),s.Tb(9,"th"),s.Bc(10,"Nhi\xean li\u1ec7u s\u1eed d\u1ee5ng"),s.Sb(),s.Tb(11,"th"),s.Bc(12,"S\u1ed1 Km ch\u1ed1t"),s.Sb(),s.Tb(13,"th"),s.Bc(14,"Nhi\xean li\u1ec7u t\u1ea1m \u1ee9ng"),s.Sb(),s.Ob(15,"th"),s.Sb(),s.Sb(),s.zc(16,u,15,8,"tbody",15),s.Sb(),s.Sb()}if(2&t){const t=s.ec();s.Cb(16),s.kc("ngForOf",t.vehiclesCheck)}}function m(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td",16),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).log(i)})),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Bc(6),s.Sb(),s.Tb(7,"td"),s.Tb(8,"button",22),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).selectItem(i)})),s.Bc(9,"Ch\u1ed1t km"),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.label),s.Cb(2),s.Cc(t.brand),s.Cb(2),s.Cc(t.manager.fullName||t.manager.displayName)}}function g(t,e){if(1&t&&(s.Tb(0,"div",10),s.Tb(1,"H4",19),s.Bc(2,"DANH S\xc1CH CH\u01afA CH\u1ed0T KM"),s.Sb(),s.Tb(3,"table",20),s.Tb(4,"thead",21),s.Tb(5,"tr"),s.Tb(6,"th"),s.Bc(7,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Tb(8,"th"),s.Bc(9,"Hi\u1ec7u xe"),s.Sb(),s.Tb(10,"th"),s.Bc(11,"Ng\u01b0\u1eddi qu\u1ea3n l\xfd"),s.Sb(),s.Ob(12,"th"),s.Sb(),s.Sb(),s.Tb(13,"tbody"),s.zc(14,m,10,3,"tr",15),s.Sb(),s.Sb(),s.Sb()),2&t){const t=s.ec();s.Cb(14),s.kc("ngForOf",t.vehiclesFilter)}}function f(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div"),s.Tb(1,"h6"),s.Bc(2,"S\u1ed1 gi\u1edd c\u1ea9u "),s.Sb(),s.Tb(3,"input",40),s.bc("input",(function(){return s.tc(t),s.ec(2).used()})),s.Sb(),s.Sb()}}function S(t,e){if(1&t&&(s.Tb(0,"div",41),s.Tb(1,"h6"),s.Bc(2,"S\u1ed1 km th\xe1ng tr\u01b0\u1edbc: "),s.Tb(3,"span",42),s.Bc(4),s.fc(5,"number"),s.Sb(),s.Sb(),s.Ob(6,"hr"),s.Tb(7,"h6"),s.Bc(8),s.Sb(),s.Ob(9,"hr"),s.Tb(10,"h6"),s.Bc(11),s.fc(12,"number"),s.Sb(),s.Sb()),2&t){const t=s.ec(2);s.Cb(4),s.Dc("",s.gc(5,3,t.itemSelected.preUsed)," "),s.Cb(4),s.Dc("S\u1ed1 km th\u1ef1c hi\u1ec7n trong th\xe1ng: ",t.newUsed-t.itemSelected.preUsed||"Ch\u01b0a c\xf3 s\u1ed1 li\u1ec7u",""),s.Cb(3),s.Dc("T\u1ed5ng s\u1ed1 nhi\xean li\u1ec7u \u0111\u01b0\u1ee3c c\u1ea5p: ",s.hc(12,5,(t.newUsed-t.itemSelected.preUsed)*t.itemSelected.quota/100+(t.timeCrane*t.itemSelected.quotaCrane||0),"0.0-1")," l\xedt")}}function T(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",23),s.Tb(1,"div",24),s.Tb(2,"div",25),s.Tb(3,"div",26),s.Tb(4,"h5",27),s.Bc(5),s.Sb(),s.Tb(6,"button",28),s.Tb(7,"span",29),s.Bc(8,"\xd7"),s.Sb(),s.Sb(),s.Sb(),s.Tb(9,"div",30),s.Tb(10,"form",31),s.Tb(11,"div",32),s.Tb(12,"h6"),s.Bc(13,"S\u1ed1 km:"),s.Sb(),s.Tb(14,"input",33),s.bc("input",(function(){return s.tc(t),s.ec().used()})),s.Sb(),s.zc(15,f,4,0,"div",34),s.Tb(16,"h6"),s.Bc(17,"S\u1ed1 nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng "),s.Sb(),s.Ob(18,"input",35),s.Ob(19,"hr"),s.zc(20,S,13,8,"div",36),s.Sb(),s.Sb(),s.Sb(),s.Tb(21,"div",37),s.Tb(22,"button",38),s.bc("click",(function(){return s.tc(t),s.ec().resetModal()})),s.Bc(23,"H\u1ee7y"),s.Sb(),s.Tb(24,"button",39),s.bc("click",(function(){return s.tc(t),s.ec().submit()})),s.Bc(25,"L\u01b0u"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=s.ec();s.Cb(5),s.Ec("Ch\u1ed1t s\u1ed1 km xe ",t.itemSelected.brand," - ",t.itemSelected.label,""),s.Cb(5),s.kc("formGroup",t.main),s.Cb(5),s.kc("ngIf",t.itemSelected.quotaCrane>0),s.Cb(5),s.kc("ngIf",t.newUsed>0||t.timeCrane>0),s.Cb(4),s.kc("disabled",!t.main.valid)}}let v=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.plus=e,this.vehicleService=i,this.settlementService=n,this.api="settlement/",this.vehicles=[],this.vehiclesFilter=[],this.vehiclesCheck=[],this.loading=!0,this.loadMoreBtn=!1,this.today=this.plus.dateYMD((new Date).toISOString()),this.newUsed=0,this.timeCrane=0,this.data=[[1,2],[3,4]],this.wopts={bookType:"xlsx",type:"array"},this.fileName="SheetJS.xlsx",this.month=null,this.main=this.fb.group({preUsed:[,[a.q.required]],used:[,[a.q.required]],timeCrane:[0,[a.q.max(255)]],fuelAdvance:[0,[]],quotaSet:[,[a.q.required]]}),this.search=this.fb.group({what:["",[a.q.minLength(3),a.q.maxLength(100)]]}),this.dateForm=this.fb.group({date:[this.today,[a.q.required]]})}ngOnInit(){this.getVehicles()}getVehicles(){this.vehicleService.get().subscribe(t=>{t?(this.vehicles=t,this.getVehiclesCheck()):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getVehiclesCheck(){this.loading=!0;const t=this.dateForm.value.date.slice(0,7);this.month=t,console.log(t),this.plus.httpGet(this.api+"getByMonth/"+t).subscribe(t=>{console.log(t),this.plus.alertToasrt(t),t?(this.vehiclesCheck=t,this.vehiclesFilter=this.plus.compareObj(this.vehicles,t),console.log(this.vehiclesFilter)):this.plus.alertToasrt({err:"L\u1ed7i k\u1ebft n\u1ed1i"}),console.log(this.vehiclesCheck),this.loading=!1})}selectItem(t){console.log(t),this.itemSelected=t,this.main.controls.quotaSet.setValue(t.quota),this.main.controls.timeCrane.setValue(0),this.main.controls.fuelAdvance.setValue(0);const e=this.dateForm.get("date").value;this.plus.httpGet(this.api+"id/"+t._id+"/month/"+e).subscribe(t=>{console.log(t),t.length>0?(this.main.controls.preUsed.setValue(t[0].used),this.itemSelected.preUsed=t[0].used):(this.plus.alertToasrt({war:"B\u1ea1n ch\u01b0a ch\u1ed1t s\u1ed1 th\xe1ng tr\u01b0\u1edbc!"}),this.main.controls.preUsed.setValue(0),this.itemSelected.preUsed=0)}),console.log(this.itemSelected)}submit(){const t=this.main.value;t.month=this.dateForm.value.date.slice(0,7),t.vehicleId=this.itemSelected._id;const e=this.plus.generateData(t);console.log("SUBMIT -> ",e),this.plus.httpPost(this.api,e).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit(),this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.itemSelected=null,this.newUsed=0,this.main.reset()}delSettlement(t){confirm("Xo\xe1 m\u1ee5c n\xe0y?")?(this.loading=!0,console.log(t),this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),this.ngOnInit()})):this.plus.alertToasrt({war:"\u0110\xe3 h\u1ee7y"})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(2e3)).subscribe(t=>{console.log(t),this.loading=!0,t.what=this.plus.removeAccents(t.what),this.vehicleService.find(t).subscribe(t=>{t.length>0&&(this.vehicles=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.vehicles.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.vehicleService.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.vehicles.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}toYM(t){return t.slice(0,6)}used(){this.newUsed=this.main.get("used").value,this.timeCrane=this.main.get("timeCrane").value}log(t){return console.log(t)}download(){const t=JSON.parse(localStorage.getItem("usrInfo"));t.unit&&t.fullName||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"})}export(){this.vehicles.push("asdasasdas");const t=h.utils.table_to_sheet("settlement");console.log(t);const e=h.utils.book_new();h.utils.book_append_sheet(e,t,"Sheet1"),h.writeFile(e,this.fileName)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(a.c),s.Nb(c.a),s.Nb(b),s.Nb(r))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-settlement"]],decls:10,vars:5,consts:[[1,"container"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","date",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],["class","col",4,"ngIf"],["class","modal fade","id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"col"],[1,"text-center","text-success","py-2"],["aria-hidden","true",1,"fa","fa-download","text-primary",3,"click"],["id","settlement",1,"table","table-hover"],[1,"thead-default"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-warning","py-2"],[1,"table","table-hover"],[1,"thead-inverse"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-primary",3,"click"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["type","number","placeholder","Nh\u1eadp s\u1ed1 km ch\u1ed1t trong th\xe1ng","formControlName","used",1,"form-control",3,"input"],[4,"ngIf"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","fuelAdvance",1,"form-control"],["class","calculator",4,"ngIf"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\xedt nhi\xean li\u1ec7u \u0111\xe3 t\u1ea1m \u1ee9ng","formControlName","timeCrane",1,"form-control",3,"input"],[1,"calculator"],[1,"text-danger","font-weight-bold"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Ob(2,"label",2),s.Bc(3,"Ch\u1ecdn th\xe1ng: "),s.Tb(4,"input",3),s.bc("change",(function(){return e.ngOnInit()})),s.Sb(),s.Sb(),s.zc(5,d,2,0,"div",4),s.Tb(6,"div",5),s.zc(7,p,17,1,"div",6),s.zc(8,g,15,1,"div",6),s.Sb(),s.Sb(),s.zc(9,T,26,6,"div",7)),2&t&&(s.Cb(1),s.kc("formGroup",e.dateForm),s.Cb(4),s.kc("ngIf",e.loading),s.Cb(2),s.kc("ngIf",e.vehiclesCheck.length>0),s.Cb(1),s.kc("ngIf",e.vehiclesFilter.length>0),s.Cb(1),s.kc("ngIf",e.itemSelected))},directives:[a.j,a.e,a.b,a.i,a.d,n.m,n.l,a.s,a.m],pipes:[n.e],styles:[""]}),t})();var C=i("tyNb");let y=(()=>{class t{constructor(t,e){this.http=t,this.plus=e,this.httpOptions=this.plus.getHeader(),this.apiUrl=this.plus.getApiUrl("order/"),this.collection="order"}get(){return this.http.get(this.apiUrl,this.httpOptions)}create(t){return this.http.post(this.apiUrl,t,this.httpOptions)}update(t){return this.http.put(this.apiUrl,t,this.httpOptions)}updateContact(t){return this.http.put(this.apiUrl+"contacts",t,this.httpOptions)}delete(t){return this.http.delete(this.apiUrl+t,this.httpOptions)}find(t){return this.http.post(this.apiUrl+"find",t,this.httpOptions)}getByDate(t){return this.http.post(this.apiUrl+"orderDate",t,this.httpOptions)}wait(t){return this.http.post(this.apiUrl+"wait",t,this.httpOptions)}cancelWait(t){return this.http.delete(this.apiUrl+"wait/"+t,this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.a),s.Xb(c.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class k{}function B(t,e){1&t&&(s.Tb(0,"div",17),s.Ob(1,"i",18),s.Sb())}function O(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",20),s.bc("click",(function(){s.tc(t);const e=s.ec().$implicit;return s.ec(2).compOrder(e)})),s.Bc(1," \u0110i gh\xe9p "),s.Sb()}}function I(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Bc(6),s.Sb(),s.Tb(7,"td"),s.Bc(8),s.Sb(),s.Tb(9,"td"),s.Bc(10),s.Sb(),s.Tb(11,"td"),s.zc(12,O,2,0,"button",19),s.Sb(),s.Sb()),2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.vehicleId.type),s.Cb(2),s.Cc(t.vehicleId.label),s.Cb(2),s.Cc(t.how),s.Cb(2),s.Cc(t.pointDes||"Xe \u0111ang \u0111\u01b0\u1ee3c ng\u01b0\u1eddi kh\xe1c \u0111\u0103ng k\xfd"),s.Cb(2),s.Cc(1===t.orderStatus?"\u0110\xe3 duy\u1ec7t":"Ch\u1edd duy\u1ec7t"),s.Cb(2),s.kc("ngIf",0===t.orderStatus)}}function x(t,e){if(1&t&&(s.Tb(0,"tbody"),s.zc(1,I,13,6,"tr",15),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.kc("ngForOf",t.orderList)}}function w(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Tb(6,"button",21),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec().order(i)})),s.Bc(7," \u0110\u0103ng k\xfd "),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit,i=s.ec();s.Cb(2),s.Cc(t.label),s.Cb(2),s.Cc(t.type),s.Cb(2),s.mc("routerLink","/dangkyxe/token/",i.token,"")}}function N(t,e){if(1&t&&(s.Tb(0,"h6"),s.Bc(1),s.Sb()),2&t){const t=e.$implicit;s.Cb(1),s.Cc(t)}}function q(t,e){if(1&t){const t=s.Ub();s.Tb(0,"h6"),s.Bc(1),s.Tb(2,"i",38),s.bc("click",(function(){s.tc(t);const i=e.index;return s.ec(2).delContact(i)})),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(1),s.Dc("",t," ")}}function M(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",22),s.Tb(1,"div",23),s.Tb(2,"div",24),s.Tb(3,"div",25),s.Tb(4,"h5",26),s.Bc(5,"\u0110\u0102NG K\xdd \u0110I GH\xc9P"),s.Sb(),s.Tb(6,"button",27),s.Tb(7,"span",28),s.Bc(8,"\xd7"),s.Sb(),s.Sb(),s.Sb(),s.Tb(9,"div",29),s.Tb(10,"div",0),s.Tb(11,"div",6),s.Tb(12,"div",12),s.Tb(13,"h6"),s.Bc(14,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),s.Sb(),s.Sb(),s.Tb(15,"div",7),s.Tb(16,"h6"),s.Bc(17),s.Sb(),s.Sb(),s.Ob(18,"hr"),s.Sb(),s.Tb(19,"div",6),s.Tb(20,"div",12),s.Tb(21,"h6"),s.Bc(22,"C\xf4ng t\xe1c:"),s.Sb(),s.Sb(),s.Tb(23,"div",7),s.Tb(24,"h6"),s.Bc(25),s.Sb(),s.Sb(),s.Ob(26,"hr"),s.Sb(),s.Tb(27,"div",6),s.Tb(28,"div",12),s.Tb(29,"h6"),s.Bc(30,"Gi\u1edd \u0111i:"),s.Sb(),s.Sb(),s.Tb(31,"div",7),s.Tb(32,"h6"),s.Bc(33),s.Sb(),s.Sb(),s.Ob(34,"hr"),s.Sb(),s.Tb(35,"div",6),s.Tb(36,"div",12),s.Tb(37,"h6"),s.Bc(38,"Ng\xe0y \u0111i:"),s.Sb(),s.Sb(),s.Tb(39,"div",7),s.Tb(40,"h6"),s.Bc(41),s.fc(42,"date"),s.Sb(),s.Sb(),s.Ob(43,"hr"),s.Sb(),s.Tb(44,"div",6),s.Tb(45,"div",12),s.Tb(46,"h6"),s.Bc(47,"Gi\u1edd v\u1ec1:"),s.Sb(),s.Sb(),s.Tb(48,"div",7),s.Tb(49,"h6"),s.Bc(50),s.Sb(),s.Sb(),s.Ob(51,"hr"),s.Sb(),s.Tb(52,"div",6),s.Tb(53,"div",12),s.Tb(54,"h6"),s.Bc(55,"Ng\xe0y v\u1ec1:"),s.Sb(),s.Sb(),s.Tb(56,"div",7),s.Tb(57,"h6"),s.Bc(58),s.fc(59,"date"),s.Sb(),s.Sb(),s.Ob(60,"hr"),s.Sb(),s.Tb(61,"div",6),s.Tb(62,"div",12),s.Tb(63,"h6"),s.Bc(64,"\u0110i\u1ec3m xu\u1ea5t ph\xe1t:"),s.Sb(),s.Sb(),s.Tb(65,"div",7),s.Tb(66,"h6"),s.Bc(67),s.Sb(),s.Sb(),s.Ob(68,"hr"),s.Sb(),s.Tb(69,"div",6),s.Tb(70,"div",12),s.Tb(71,"h6"),s.Bc(72,"\u0110i\u1ec3m cu\u1ed1i:"),s.Sb(),s.Sb(),s.Tb(73,"div",7),s.Tb(74,"h6"),s.Bc(75),s.Sb(),s.Sb(),s.Ob(76,"hr"),s.Sb(),s.Tb(77,"div",6),s.Tb(78,"div",12),s.Tb(79,"h6"),s.Bc(80,"Li\xean h\u1ec7:"),s.Sb(),s.Sb(),s.Tb(81,"div",7),s.zc(82,N,2,1,"h6",15),s.zc(83,q,3,1,"h6",15),s.Tb(84,"form",30),s.Ob(85,"input",31),s.Tb(86,"button",32),s.bc("click",(function(){return s.tc(t),s.ec().addContact()})),s.Bc(87,"Th\xeam li\xean h\u1ec7"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(88,"div",33),s.Tb(89,"button",34),s.bc("click",(function(){return s.tc(t),s.ec().resetModal()})),s.Ob(90,"i",35),s.Sb(),s.Tb(91,"button",36),s.bc("click",(function(){return s.tc(t),s.ec().updateOrderContact()})),s.Ob(92,"i",37),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=s.ec();s.Cb(17),s.Dc("",t.orderSelected.how," ng\u01b0\u1eddi"),s.Cb(8),s.Cc(t.orderSelected.todo),s.Cb(8),s.Cc(t.orderSelected.timeGo),s.Cb(8),s.Cc(s.hc(42,12,t.orderSelected.dateGo,"dd/MM/yyyy")),s.Cb(9),s.Cc(t.orderSelected.timeBack),s.Cb(8),s.Cc(s.hc(59,15,t.orderSelected.dayBack,"dd/MM/yyyy")),s.Cb(9),s.Cc(t.orderSelected.pointGo),s.Cb(8),s.Cc(t.orderSelected.pointDes),s.Cb(7),s.kc("ngForOf",t.orderSelected.contact),s.Cb(1),s.kc("ngForOf",t.contacts),s.Cb(1),s.kc("formGroup",t.contactForm),s.Cb(7),s.kc("disabled",0===t.contacts.length)}}let D=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.orderSV=e,this.vehicleSV=i,this.fb=n,this.vehicles=[],this.vehiclesWait=[],this.orderList=[],this.loading=!0,this.loadMoreBtn=!1,this.contacts=[],this.api="order/",this.today=this.plus.dateYMD((new Date).toISOString()),this.token=(new Date).getTime()+18e4,this.search=this.fb.group({what:["",[a.q.minLength(3),a.q.maxLength(100)]]}),this.dateForm=this.fb.group({dateGo:[this.today,[a.q.required,a.q.minLength(10),a.q.maxLength(10)]]}),this.contactForm=this.fb.group({pesonnel:["",a.q.required]})}ngOnInit(){this.getVehicles()}find(){this.search.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.search.valid&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.orderSV.find(t).subscribe(t=>{t.length>0&&(this.orderList=t.sort((t,e)=>t.dateModify-e.dateModify)),this.loadMoreBtn=!0,this.loading=!1}))})}getVehicles(){this.plus.httpGet("vehicle/order/").subscribe(t=>{t?(this.vehicles=t,this.getOrderDay(this.today)):this.plus.alertToasrt({war:"Vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat"})}),this.loading=!1}getOrders(){const t=this.dateForm.value;this.dateForm.valid&&(this.loading=!0,this.orderList=[],this.plus.httpPost("order/orderDate",t).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)}))}getOrderDay(t){this.plus.httpPost("order/orderDate",{dateGo:t}).subscribe(t=>{this.plus.alertToasrt(t),this.vehiclesWait=this.plus.compareObj(this.vehicles,t),this.loading=!1,this.orderList=t,this.delWait(t)})}loadMore(){this.loading=!0;const t=Math.ceil(this.orderList.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.orderSV.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.orderList.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}resetModal(){this.contacts=[]}wait(t){this.orderSV.vehicle=t;const e=this.dateForm.value;this.orderSV.dateGo=e.dateGo,this.orderSV.wait({vehicleId:t._id,dateGo:e.dateGo}).subscribe(t=>this.plus.alertToasrt(t))}delWait(t){const e=Date.now();t.length>0&&t.forEach((t,i)=>{3===t.orderStatus&&t.canEdit-e<0&&this.plus.httpDelete("order/wait/",t._id).subscribe(t=>{t.id&&this.getOrders()})})}order(t){const e=this.dateForm.value;e.vehicle=t,e.token=this.token,console.log(e),localStorage.setItem("order",JSON.stringify(e))}compOrder(t){this.orderSelected=t}addContact(){this.contacts.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contacts.splice(t,1)}updateOrderContact(){this.orderSelected.contact=this.contacts.concat(this.orderSelected.contact);const t=this.plus.addKeyWord(this.orderSelected),e=new k;e._id=this.orderSelected._id,e.contact=t.contact,e.keyWord=t.keyWord,this.orderSV.updateContact(e).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")}),this.contacts=[]}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(y),s.Nb(b),s.Nb(a.c))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-order-list"]],decls:41,vars:5,consts:[[1,"container-fluid"],[1,"text-center","bg-warning","py-2","rounded"],[1,"form-group",3,"formGroup"],["for",""],["type","date","formControlName","dateGo",1,"form-control",3,"change"],["class","text-center text-primary",4,"ngIf"],[1,"row"],[1,"col-sm-8"],[1,"text-center","bg-info","py-2","rounded"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[4,"ngIf"],[1,"col-sm-4"],[1,"text-center","bg-success","py-2","rounded"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","modal fade","id","modelId","tabindex","-1",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","button","class","btn btn-outline-success mx-1","data-toggle","modal","data-target","#modelId",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-success","mx-1",3,"click"],["type","button",1,"btn","btn-outline-success",3,"routerLink","click"],["id","modelId","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"contact",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger","mx-2",3,"click"],[1,"fa","fa-times","text-danger"],["type","button",1,"btn","btn-outline-primary","mx-2",3,"disabled","click"],[1,"fa","fa-floppy-o"],[1,"fa","fa-trash","text-danger",3,"click"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h4",1),s.Bc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C"),s.Sb(),s.Tb(3,"div",2),s.Ob(4,"label",3),s.Bc(5,"Ch\u1ecdn ng\xe0y \u0111i: "),s.Tb(6,"input",4),s.bc("change",(function(){return e.getOrders()})),s.Sb(),s.Sb(),s.zc(7,B,2,0,"div",5),s.Tb(8,"div",6),s.Tb(9,"div",7),s.Tb(10,"h5",8),s.Bc(11,"DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd"),s.Sb(),s.Tb(12,"table",9),s.Tb(13,"thead",10),s.Tb(14,"tr"),s.Tb(15,"th"),s.Bc(16,"Lo\u1ea1i xe"),s.Sb(),s.Tb(17,"th"),s.Bc(18,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Tb(19,"th"),s.Bc(20,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),s.Sb(),s.Tb(21,"th"),s.Bc(22,"\u0110i\u1ec3m \u0111\u1ebfn"),s.Sb(),s.Tb(23,"th"),s.Bc(24,"Tr\u1ea1ng th\xe1i"),s.Sb(),s.Ob(25,"th"),s.Sb(),s.Sb(),s.zc(26,x,2,1,"tbody",11),s.Sb(),s.Sb(),s.Tb(27,"div",12),s.Tb(28,"h5",13),s.Bc(29,"DANH S\xc1CH XE CH\u1edc"),s.Sb(),s.Tb(30,"table",9),s.Tb(31,"thead",10),s.Tb(32,"tr"),s.Tb(33,"th"),s.Bc(34,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Tb(35,"th"),s.Bc(36,"Lo\u1ea1i xe"),s.Sb(),s.Ob(37,"th",14),s.Sb(),s.Sb(),s.Tb(38,"tbody"),s.zc(39,w,8,3,"tr",15),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.zc(40,M,93,18,"div",16),s.Sb()),2&t&&(s.Cb(3),s.kc("formGroup",e.dateForm),s.Cb(4),s.kc("ngIf",e.loading),s.Cb(19),s.kc("ngIf",e.orderList.length>0),s.Cb(13),s.kc("ngForOf",e.vehiclesWait),s.Cb(1),s.kc("ngIf",e.orderSelected))},directives:[a.j,a.e,a.b,a.i,a.d,n.m,n.l,C.c,a.s,a.o],pipes:[n.d],styles:[""]}),t})();function G(t,e){1&t&&(s.Tb(0,"div",7),s.Ob(1,"i",8),s.Sb())}function U(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",16),s.bc("click",(function(){s.tc(t);const e=s.ec().$implicit;return s.ec(2).onDelete(e)})),s.Ob(1,"i",17),s.Sb()}}function L(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.fc(5,"date"),s.Sb(),s.Tb(6,"td"),s.Bc(7),s.fc(8,"date"),s.Sb(),s.Tb(9,"td"),s.Bc(10),s.Sb(),s.Tb(11,"td",11),s.Tb(12,"button",13),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).download(i)})),s.Ob(13,"i",14),s.Sb(),s.zc(14,U,2,0,"button",15),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.todo),s.Cb(2),s.Cc(s.hc(5,5,t.dateGo,"dd/MM/yyyy")),s.Cb(3),s.Cc(s.hc(8,8,t.dayBack,"dd/MM/yyyy")),s.Cb(3),s.Cc(t.pointDes),s.Cb(4),s.kc("ngIf",1!==t.orderStatus)}}function V(t,e){if(1&t&&(s.Tb(0,"table",9),s.Tb(1,"thead",10),s.Tb(2,"tr"),s.Tb(3,"th"),s.Bc(4,"C\xf4ng t\xe1c"),s.Sb(),s.Tb(5,"th"),s.Bc(6,"Ng\xe0y \u0111i"),s.Sb(),s.Tb(7,"th"),s.Bc(8,"Ng\xe0y v\u1ec1"),s.Sb(),s.Tb(9,"th"),s.Bc(10,"\u0110i\u1ec3m c\xf4ng t\xe1c"),s.Sb(),s.Ob(11,"th",11),s.Sb(),s.Sb(),s.Tb(12,"tbody"),s.zc(13,L,15,11,"tr",12),s.Sb(),s.Sb()),2&t){const t=s.ec();s.Cb(13),s.kc("ngForOf",t.datalist)}}function F(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",11),s.Tb(1,"button",18),s.bc("click",(function(){return s.tc(t),s.ec().loadMore()})),s.Bc(2," K\u1ebft qu\u1ea3 kh\xe1c "),s.Sb(),s.Sb()}}const z=function(t){return{loading:t}};let $=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.DB=e,this.fb=i,this.vehicleSV=n,this.vehicles=[],this.loading=!0,this.search=this.fb.group({what:["",[a.q.minLength(3),a.q.maxLength(100)]]})}ngOnInit(){this.getOrders(),this.find()}getOrders(){this.DB.get().subscribe(t=>{this.loading=!1,this.datalist=t,this.plus.alertToasrt(t)})}getVehicles(){this.vehicleSV.get().subscribe(t=>{this.vehicles=t,this.plus.alertToasrt(t)})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(1e3)).subscribe(t=>{t.what=this.plus.removeAccents(t.what),this.loading=!0,this.DB.find(t).subscribe(t=>{t.length>0?this.datalist=t.sort((t,e)=>t.dateModify-e.dateModify):this.plus.alertToasrt({msg:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p!"}),this.loadMoreBtn=!0,this.loading=!1})})}loadMore(){this.loading=!0;const t=Math.ceil(this.datalist.length/10)+1,e=this.search.value;e.what=this.plus.removeAccents(e.what),e.page=t,this.DB.find(e).subscribe(t=>{t.length>0?t.forEach(t=>{this.datalist.push(t)}):(this.plus.alertToasrt({msg:"Kh\xf4ng c\xf2n k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p \n Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm c\u1ee5 th\u1ec3 h\u01a1n"}),this.loadMoreBtn=!1),this.loading=!1})}onEdit(t){console.log(t)}onDelete(t){console.log(t),1===t.orderStatus?this.plus.alertToasrt({err:"Vui l\xf2ng kh\xf4ng th\u1ef1c hi\u1ec7n l\u1ea1i! T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb kho\xe1!"}):this.DB.delete(t._id).subscribe(t=>{this.plus.alertToasrt(t),this.getOrders()})}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(y),s.Nb(a.c),s.Nb(b))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-order-manager"]],decls:8,vars:7,consts:[[1,"container"],[1,"text-primary","text-center","bg-white","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control","text-danger",3,"ngClass"],["class","text-center text-primary",4,"ngIf"],["class","table table-hover table-inverse",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],[1,"table","table-hover","table-inverse"],[1,"thead-inverse"],[1,"text-center"],[4,"ngFor","ngForOf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h4",1),s.Bc(2," DANH S\xc1CH XE \u0110\xc3 \u0110\u0102NG K\xdd "),s.Sb(),s.Tb(3,"div",2),s.Ob(4,"input",3),s.Sb(),s.zc(5,G,2,0,"div",4),s.zc(6,V,14,1,"table",5),s.zc(7,F,3,0,"div",6),s.Sb()),2&t&&(s.Cb(3),s.kc("formGroup",e.search),s.Cb(1),s.kc("ngClass",s.oc(5,z,e.loading)),s.Cb(1),s.kc("ngIf",e.loading),s.Cb(1),s.kc("ngIf",e.datalist),s.Cb(1),s.kc("ngIf",e.loadMoreBtn))},directives:[a.j,a.e,a.b,a.i,a.d,n.k,n.m,n.l],pipes:[n.d],styles:[""]}),t})(),H=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Hb({type:t,selectors:[["app-vehicle"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Tb(0,"p"),s.Bc(1,"vehicle works!"),s.Sb())},styles:[""]}),t})();function _(t,e){if(1&t&&(s.Tb(0,"h4",4),s.Bc(1),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.Ec("Lo\u1ea1i xe: ",t.vehicle.type," - Bi\u1ec3n s\u1ed1: ",t.vehicle.label,"")}}function j(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div"),s.Tb(1,"p"),s.Bc(2),s.Tb(3,"i",23),s.bc("click",(function(){s.tc(t);const i=e.index;return s.ec().delContact(i)})),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit,i=e.index;s.Cb(2),s.Ec("",i+1,"./ ",t," ")}}function A(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",24),s.Tb(1,"button",25),s.bc("click",(function(){return s.tc(t),s.ec().submit()})),s.Ob(2,"i",26),s.Sb(),s.Tb(3,"button",27),s.bc("click",(function(){return s.tc(t),s.ec().back()})),s.Ob(4,"i",28),s.Sb(),s.Sb()}if(2&t){const t=s.ec();s.Cb(1),s.kc("disabled",!t.main.valid||0===t.contact.length)}}function K(t,e){1&t&&s.Ob(0,"option",29),2&t&&s.lc("value",e.$implicit)}let P=(()=>{class t{constructor(t,e,i,n,c,s,o){this.plus=t,this.DB=e,this.vehicleSV=i,this.fb=n,this.router=c,this.location=s,this.route=o,this.api="order/",this.vehicle=null,this.loading=!0,this.loadMoreBtn=!1,this.dateGo=null,this.contact=[],this.timeOut=!1,this.waitId="",this.token=null,this.over=null,this.time=[],this.main=this.fb.group({how:[,[a.q.required]],todo:[,[a.q.required]],timeGo:[,[a.q.required,a.q.minLength(5)]],dateGo:[,[a.q.required]],timeBack:[,[a.q.required,a.q.minLength(5)]],dayBack:[this.dateGo,[a.q.required]],pointGo:[],pointDes:[,[a.q.required]]}),this.contactForm=this.fb.group({pesonnel:["",a.q.required]})}ngOnInit(){clearInterval(this.over),this.getById(),this.timeInit()}getById(){const t=JSON.parse(localStorage.getItem("order"));if(console.log(t),!t||t.token<Date.now()||t.token-Date.now()>19e4)return this.router.navigate(["/dangkyxe"]);this.token=t.token,this.vehicle=t.vehicle,this.countDown(),this.plus.alertToasrt({msg:"Xe \u0111\u01b0\u1ee3c gi\u1eef cho b\u1ea1n 03 ph\xfat \u0111\u1ec3 ho\xe0n t\u1ea5t th\xf4ng tin!"}),this.main.controls.dateGo.setValue(t.dateGo),this.main.controls.dayBack.setValue(t.dateGo),this.plus.httpPost(this.api+"wait",{vehicleId:t.vehicle._id,dateGo:t.dateGo}).subscribe(t=>{this.waitId=t.id})}addContact(){this.contact.push(this.contactForm.value.pesonnel),this.contactForm.reset()}delContact(t){this.contact.splice(t,1)}submit(){const t=this.main.value;if(t.vehicleId=this.vehicle._id,t.driverId=this.vehicle.manager._id,t.contact=this.contact,new Date(t.dateGo)>new Date(t.dayBack))this.plus.alertToasrt({war:"Ng\xe0y v\u1ec1 ph\u1ea3i sau ng\xe0y \u0111i"});else{const e=this.plus.generateData(t);console.log(e),this.DB.create(e).subscribe(t=>{t.msg?(this.plus.alertToasrt(t),this.location.back(),clearInterval(this.over)):this.plus.alertToasrt(t)})}}back(){clearInterval(this.over),this.location.back(),this.plus.httpDelete(this.api+"wait/",this.waitId).subscribe(t=>{this.plus.alertToasrt(t)})}countDown(){clearInterval(this.over),this.over=setInterval(()=>{const t=(new Date).getTime(),e=+this.token-t,i=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);this.remain=Math.round(100*(60*i+n)/180),console.log(this.over),localStorage.setItem("over",this.over),e<0&&(clearInterval(this.over),this.back())},2e3)}timeOver(){const t=setTimeout(()=>{clearInterval(this.over),console.log("timeOver()",this.over),this.router.navigate(["/dangkyxe"])},18e4);console.log(t)}timeInit(){const t=[];for(let e=0;e<23;)e<10?(t.push("0"+e+"g00"),t.push("0"+e+"g30")):(t.push(e+"g00"),t.push(e+"g30")),e++;return this.time=t}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(y),s.Nb(b),s.Nb(a.c),s.Nb(C.b),s.Nb(n.i),s.Nb(C.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-order"]],decls:40,vars:8,consts:[[1,"container"],[1,"text-center","bg-warning","py-2","rounded"],["class","font-weight-bold",4,"ngIf"],["id","orderVehicle",3,"formGroup"],[1,"font-weight-bold"],["type","number","placeholder","S\u1ed1 ng\u01b0\u1eddi \u0111i","required","","formControlName","how",1,"form-control","mb-2"],["type","text","placeholder","N\u1ed9i dung c\xf4ng t\xe1c","required","","formControlName","todo",1,"form-control","mb-2"],[1,"row"],[1,"col-sm"],["type","text","list","time","placeholder","VD: 05g30","formControlName","timeGo",1,"form-control","mb-2"],["type","text","list","time","placeholder","VD: 16g30","formControlName","timeBack",1,"form-control","mb-2"],["type","date","placeholder","Ng\xe0y v\u1ec1","required","","formControlName","dayBack",1,"form-control","mb-2"],["type","text","placeholder","\u0110i\u1ec3m \u0111\u1ebfn","autocomplete","on","required","","formControlName","pointDes",1,"form-control","mb-2"],[4,"ngFor","ngForOf"],[1,"contact",3,"formGroup"],["type","text","list","users","placeholder","H\u1ecd v\xe0 t\xean + s\u1ed1 \u0111i\u1ec7n tho\u1ea1i, N\u01a1i \u0111\xf3n ...","required","","formControlName","pesonnel",1,"form-control","mb-2"],[1,"btn","btn-outline-info","my-1",3,"click"],["id","users"],["class","action my-2 text-center","style","font-size: 24px",4,"ngIf"],[1,"progress","my-2"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated","progress-bar-striped","bg-warning"],["id","time"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-trash","text-danger",3,"click"],[1,"action","my-2","text-center",2,"font-size","24px"],["type","button",1,"btn","btn-primary","mx-2","px-4",2,"font-size","24px",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-floppy-o"],["type","button",1,"btn","btn-second","px-4",2,"font-size","24px",3,"click"],[1,"fa","fa-times","text-danger"],[3,"value"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h4",1),s.Bc(2,"\u0110\u0102NG K\xdd XE C\xd4NG T\xc1C "),s.Sb(),s.zc(3,_,2,2,"h4",2),s.Tb(4,"form",3),s.Tb(5,"label",4),s.Bc(6,"S\u1ed1 ng\u01b0\u1eddi \u0111i"),s.Sb(),s.Ob(7,"input",5),s.Tb(8,"label",4),s.Bc(9,"C\xf4ng t\xe1c"),s.Sb(),s.Ob(10,"input",6),s.Tb(11,"div",7),s.Tb(12,"div",8),s.Tb(13,"label",4),s.Bc(14,"Gi\u1edd \u0111i"),s.Sb(),s.Ob(15,"input",9),s.Sb(),s.Tb(16,"div",8),s.Tb(17,"label",4),s.Bc(18,"Gi\u1edd v\u1ec1"),s.Sb(),s.Ob(19,"input",10),s.Sb(),s.Tb(20,"div",8),s.Tb(21,"label",4),s.Bc(22,"Ng\xe0y v\u1ec1"),s.Sb(),s.Ob(23,"input",11),s.Sb(),s.Sb(),s.Tb(24,"label",4),s.Bc(25,"\u0110\u1ecba \u0111i\u1ec3m c\xf4ng t\xe1c"),s.Sb(),s.Ob(26,"input",12),s.Tb(27,"label",4),s.Bc(28,"Li\xean h\u1ec7"),s.Sb(),s.zc(29,j,4,2,"div",13),s.Sb(),s.Tb(30,"form",14),s.Ob(31,"input",15),s.Tb(32,"button",16),s.bc("click",(function(){return e.addContact()})),s.Bc(33,"Th\xeam li\xean h\u1ec7"),s.Sb(),s.Sb(),s.Ob(34,"datalist",17),s.zc(35,A,5,1,"div",18),s.Tb(36,"div",19),s.Ob(37,"div",20),s.Sb(),s.Sb(),s.Tb(38,"datalist",21),s.zc(39,K,1,1,"option",22),s.Sb()),2&t&&(s.Cb(3),s.kc("ngIf",e.vehicle),s.Cb(1),s.kc("formGroup",e.main),s.Cb(25),s.kc("ngForOf",e.contact),s.Cb(1),s.kc("formGroup",e.contactForm),s.Cb(5),s.kc("ngIf",e.waitId.length>0),s.Cb(2),s.yc("width",e.remain+"%"),s.Cb(2),s.kc("ngForOf",e.time))},directives:[n.m,a.s,a.j,a.e,a.m,a.b,a.o,a.i,a.d,n.l,a.l,a.r],styles:[""]}),t})();function E(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td",45),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).log(i)})),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Bc(6),s.fc(7,"date"),s.Sb(),s.Tb(8,"td"),s.Bc(9),s.fc(10,"date"),s.Sb(),s.Tb(11,"td"),s.Bc(12),s.fc(13,"number"),s.Sb(),s.Tb(14,"td"),s.Tb(15,"button",46),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).editItem(i)})),s.Ob(16,"i",47),s.Sb(),s.Tb(17,"button",48),s.bc("click",(function(){s.tc(t);const i=e.$implicit,n=e.index;return s.ec(2).delItem(i._id,n)})),s.Ob(18,"i",49),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.vehicleId.label),s.Cb(2),s.Cc(t.regType),s.Cb(2),s.Cc(s.hc(7,5,t.fromDate,"dd/MM/yyyy")),s.Cb(3),s.Cc(s.hc(10,8,t.toDate,"dd/MM/yyyy")),s.Cb(3),s.Cc(s.gc(13,11,t.cost))}}function X(t,e){if(1&t&&(s.Tb(0,"tbody"),s.zc(1,E,19,13,"tr",44),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.kc("ngForOf",t.DBlist)}}function Y(t,e){1&t&&(s.Tb(0,"div",50),s.Ob(1,"i",51),s.Sb())}function W(t,e){if(1&t&&(s.Tb(0,"span"),s.Bc(1),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.Dc(" ",t.itemSelected.vehicleId.label,"")}}function J(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Bc(6),s.Sb(),s.Tb(7,"td"),s.Tb(8,"button",13),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(3).selectVehicle(i)})),s.Bc(9,"Ch\u1ecdn"),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.label),s.Cb(2),s.Cc(t.type),s.Cb(2),s.Cc(t.brand)}}function R(t,e){if(1&t&&(s.Tb(0,"table",4),s.Tb(1,"thead",5),s.Tb(2,"tr"),s.Tb(3,"th"),s.Bc(4,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Tb(5,"th"),s.Bc(6,"Lo\u1ea1i xe"),s.Sb(),s.Tb(7,"th"),s.Bc(8,"Hi\u1ec7u xe"),s.Sb(),s.Ob(9,"th"),s.Sb(),s.Sb(),s.Tb(10,"tbody"),s.zc(11,J,10,3,"tr",44),s.Sb(),s.Sb()),2&t){const t=s.ec(2);s.Cb(11),s.kc("ngForOf",t.vehicleList)}}const Q=function(t){return{loading:t}};function Z(t,e){if(1&t){const t=s.Ub();s.Tb(0,"div",2),s.Tb(1,"input",52),s.bc("change",(function(){return s.tc(t),s.ec().getVehicles()})),s.Sb(),s.zc(2,R,12,1,"table",53),s.Sb()}if(2&t){const t=s.ec();s.kc("formGroup",t.searchVehicle),s.Cb(1),s.kc("ngClass",s.oc(3,Q,t.loading)),s.Cb(1),s.kc("ngIf",t.vehicleList.length>0)}}function tt(t,e){if(1&t&&(s.Tb(0,"div",27),s.Tb(1,"div",28),s.Tb(2,"h6"),s.Bc(3,"Xe:"),s.Sb(),s.Sb(),s.Tb(4,"div",29),s.Bc(5," \xa0"),s.Tb(6,"h6"),s.Bc(7),s.Sb(),s.Sb(),s.Sb()),2&t){const t=s.ec();s.Cb(7),s.Ec("",t.vehicleSelected.label," - ",t.vehicleSelected.brand,"")}}let et=(()=>{class t{constructor(t,e,i,n){this.plus=t,this.vehicleSV=e,this.fb=i,this.route=n,this.api="registry/",this.loading=!0,this.DBlist=[],this.vehicleList=[],this.vehicleSelected=null,this.today=this.plus.dateYMD((new Date).toISOString()),this.main=this.fb.group({_id:[,[]],vehicleId:[,[a.q.required]],regType:[,[a.q.required]],fromDate:[,[a.q.required]],toDate:[,[a.q.required]],cost:[,[]]}),this.search=this.fb.group({what:["",[a.q.minLength(4),a.q.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[a.q.minLength(4),a.q.maxLength(100)]]})}ngOnInit(){this.getReg(),this.find(),this.getVehicles()}getReg(){this.plus.httpPost(this.api+"find",{page:1}).subscribe(t=>{this.plus.alertToasrt(t),this.DBlist=t,this.loading=!1})}find(){this.search.valid&&this.search.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost(this.api+"find",t).subscribe(t=>{this.loading=!1,t.length>0&&(this.DBlist=t)})})}submit(){const t=this.plus.generateData(this.main.value);t._id?this.update(t):this.create(t),this.resetModal(),this.ngOnInit()}create(t){this.plus.httpPost(this.api,t).subscribe(e=>{this.plus.alertToasrt(e),e.msg&&(this.DBlist.push(t),this.plus.sortArr(this.DBlist,"dateModify"),this.resetModal()),this.getReg()})}update(t){this.plus.httpPut(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.resetModal()})}resetModal(){this.plus.clickBtn("closeModal"),this.main.reset(),this.itemSelected=null,this.vehicleList=[]}loadMore(){const t=Math.ceil(this.DBlist.length/10)+1;this.plus.httpPost(this.api+"find",{page:t}).subscribe(t=>{t.length>0?t.forEach(t=>{this.DBlist.push(t)}):this.plus.alertToasrt({msg:"Kh\xf4ng\xa0c\xf2n\xa0k\u1ebft\xa0qu\u1ea3\xa0ph\xf9\xa0h\u1ee3p\xa0\n\xa0Nh\u1eadp\xa0n\u1ed9i\xa0dung\xa0c\u1ea7n\xa0t\xecm\xa0c\u1ee5\xa0th\u1ec3\xa0h\u01a1n"}),this.loading=!1})}addItem(){this.resetModal(),this.plus.clickBtn("openModal")}editItem(t){const e=t;this.itemSelected=e,e.fromDate=this.plus.UTCtoYMD(e.fromDate),e.toDate=this.plus.UTCtoYMD(e.toDate),this.main.patchValue(t),this.plus.clickBtn("openModal"),console.log(e)}delItem(t,e){this.plus.httpDelete(this.api,t).subscribe(t=>{this.plus.alertToasrt(t),t.msg&&this.DBlist.splice(e,1)})}getVehicles(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,t.length>0?this.vehicleList=t:this.plus.alertToasrt({war:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"})})})}selectVehicle(t){console.log(t),this.main.controls.vehicleId.setValue(t._id),this.vehicleSelected=t,this.vehicleList=[]}log(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(b),s.Nb(a.c),s.Nb(C.a))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-registry"]],decls:90,vars:11,consts:[[1,"container"],[1,"text-primary","text-center","bg-light","py-2","rounded"],[1,"form-group",3,"formGroup"],["list","students","type","text","formControlName","what","aria-describedby","helpId","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","autocomplete","on",1,"form-control",3,"ngClass"],[1,"table","table-hover"],[1,"thead-default"],["type","button",1,"btn","btn-success","mx-1",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"],[4,"ngIf"],["class","text-center text-primary",4,"ngIf"],[1,"loadMore","text-center","my-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#modelId"],["id","modelId","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["myModal",""],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"form-group"],["formControlName","regType",1,"form-control"],["value","\u0110\u0103ng ki\u1ec3m"],["value","C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"],["value","B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"],["value","B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"],["value","Ph\xed VTEC"],[1,"row","form-group"],["type","date","formControlName","fromDate",1,"form-control"],["type","date","formControlName","toDate",1,"form-control"],["type","number","formControlName","cost",1,"form-control"],[1,"modal-footer"],["id","closeModal","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash"],[1,"text-center","text-primary"],[1,"fa","fa-spinner","fa-spin",2,"font-size","36px"],["type","text","required","","formControlName","what","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n t\xecm v\xe0 ch\u1ecdn",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h4",1),s.Bc(2," H\u1ea0N D\xd9NG Y\xcaU C\u1ea6U "),s.Sb(),s.Tb(3,"div",2),s.Ob(4,"input",3),s.Sb(),s.Tb(5,"table",4),s.Tb(6,"thead",5),s.Tb(7,"tr"),s.Tb(8,"th"),s.Bc(9,"Xe"),s.Sb(),s.Tb(10,"th"),s.Bc(11,"Lo\u1ea1i h\u1ed3 s\u01a1"),s.Sb(),s.Tb(12,"th"),s.Bc(13,"Ng\xe0y s\u1eed d\u1ee5ng"),s.Sb(),s.Tb(14,"th"),s.Bc(15,"Ng\xe0y h\u1ebft h\u1ea1n"),s.Sb(),s.Tb(16,"th"),s.Bc(17,"S\u1ed1 ti\u1ec1n"),s.Sb(),s.Tb(18,"th"),s.Tb(19,"button",6),s.bc("click",(function(){return e.addItem()})),s.Ob(20,"i",7),s.Sb(),s.Tb(21,"button",8),s.bc("click",(function(){return e.ngOnInit()})),s.Ob(22,"i",9),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.zc(23,X,2,1,"tbody",10),s.Sb(),s.zc(24,Y,2,0,"div",11),s.Tb(25,"div",12),s.Tb(26,"button",13),s.bc("click",(function(){return e.loadMore()})),s.Bc(27,"Xem th\xeam"),s.Sb(),s.Sb(),s.Sb(),s.Tb(28,"button",14),s.Bc(29,"Modal"),s.Sb(),s.Tb(30,"div",15,16),s.Tb(32,"div",17),s.Tb(33,"div",18),s.Tb(34,"div",19),s.Tb(35,"h5",20),s.Bc(36,"Nh\u1eadp th\xf4ng tin xe "),s.zc(37,W,2,1,"span",10),s.Sb(),s.Tb(38,"button",21),s.Tb(39,"span",22),s.Bc(40,"\xd7"),s.Sb(),s.Sb(),s.Sb(),s.Tb(41,"div",23),s.zc(42,Z,3,5,"div",24),s.Tb(43,"form",25),s.zc(44,tt,8,2,"div",26),s.Ob(45,"hr"),s.Tb(46,"div",27),s.Tb(47,"div",28),s.Tb(48,"h6"),s.Bc(49,"Lo\u1ea1i h\u1ed3 s\u01a1:"),s.Sb(),s.Sb(),s.Tb(50,"div",29),s.Tb(51,"div",30),s.Tb(52,"select",31),s.Tb(53,"option",32),s.Bc(54,"\u0110\u0103ng ki\u1ec3m"),s.Sb(),s.Tb(55,"option",33),s.Bc(56,"C\u01b0\u1edbc \u0111\u01b0\u1eddng b\u1ed9"),s.Sb(),s.Tb(57,"option",34),s.Bc(58,"B\u1ea3o hi\u1ec3m b\u1eaft bu\u1ed9c"),s.Sb(),s.Tb(59,"option",35),s.Bc(60,"B\u1ea3o hi\u1ec3m v\u1eadt ch\u1ea5t"),s.Sb(),s.Tb(61,"option",36),s.Bc(62,"Ph\xed VTEC"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Ob(63,"hr"),s.Tb(64,"div",37),s.Tb(65,"div",28),s.Tb(66,"h6"),s.Bc(67,"Ng\xe0y s\u1eed d\u1ee5ng:"),s.Sb(),s.Sb(),s.Tb(68,"div",29),s.Ob(69,"input",38),s.Sb(),s.Sb(),s.Ob(70,"hr"),s.Tb(71,"div",37),s.Tb(72,"div",28),s.Tb(73,"h6"),s.Bc(74,"Ng\xe0y h\u1ebft h\u1ea1n:"),s.Sb(),s.Sb(),s.Tb(75,"div",29),s.Ob(76,"input",39),s.Sb(),s.Sb(),s.Ob(77,"hr"),s.Tb(78,"div",37),s.Tb(79,"div",28),s.Tb(80,"h6"),s.Bc(81,"S\u1ed1 ti\u1ec1n:"),s.Sb(),s.Sb(),s.Tb(82,"div",29),s.Ob(83,"input",40),s.Sb(),s.Sb(),s.Ob(84,"hr"),s.Sb(),s.Sb(),s.Tb(85,"div",41),s.Tb(86,"button",42),s.Bc(87,"H\u1ee7y"),s.Sb(),s.Tb(88,"button",43),s.bc("click",(function(){return e.submit()})),s.Bc(89,"L\u01b0u"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Cb(3),s.kc("formGroup",e.search),s.Cb(1),s.kc("ngClass",s.oc(9,Q,e.loading)),s.Cb(19),s.kc("ngIf",e.DBlist.length>0),s.Cb(1),s.kc("ngIf",e.loading),s.Cb(13),s.kc("ngIf",e.itemSelected),s.Cb(5),s.kc("ngIf",!e.itemSelected),s.Cb(1),s.kc("formGroup",e.main),s.Cb(1),s.kc("ngIf",e.vehicleSelected),s.Cb(44),s.kc("disabled",!e.main.valid))},directives:[a.j,a.e,a.b,a.i,a.d,n.k,n.m,a.s,a.p,a.l,a.r,a.m,n.l,a.o],pipes:[n.d,n.e],styles:[""]}),t})();var it=i("mrSG");function nt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",43),s.bc("click",(function(){s.tc(t);const e=s.ec(),i=e.$implicit,n=e.index;return s.ec(2).accept(i,n)})),s.Ob(1,"i",44),s.Sb()}}function ct(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",45),s.bc("click",(function(){s.tc(t);const e=s.ec().$implicit;return s.ec(2).editItem(e)})),s.Ob(1,"i",46),s.Sb()}}function st(t,e){if(1&t){const t=s.Ub();s.Tb(0,"button",47),s.bc("click",(function(){s.tc(t);const e=s.ec().$implicit;return s.ec(2).changeStatus(e)})),s.Ob(1,"i",48),s.Sb()}}function ot(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Bc(6),s.Sb(),s.Tb(7,"td"),s.Bc(8),s.fc(9,"date"),s.Sb(),s.Tb(10,"td"),s.Bc(11),s.Sb(),s.Tb(12,"td"),s.zc(13,nt,2,0,"button",38),s.zc(14,ct,2,0,"button",39),s.Tb(15,"button",40),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).download(i)})),s.Ob(16,"i",41),s.Sb(),s.zc(17,st,2,0,"button",42),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit,i=s.ec(2);s.Cb(2),s.Cc(t.vehicleId.label),s.Cb(2),s.Cc(t.vehicleId.type),s.Cb(2),s.Cc(t.driverId.fullName||t.driverId.displayName),s.Cb(2),s.Cc(s.hc(9,8,t.dateGo,"dd/MM/yyyy")),s.Cb(3),s.Cc(t.todo),s.Cb(2),s.kc("ngIf",1!==t.orderStatus),s.Cb(1),s.kc("ngIf",1!==t.orderStatus),s.Cb(3),s.kc("ngIf",i.admin)}}function rt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"table",33),s.Tb(1,"thead",34),s.Tb(2,"tr"),s.Tb(3,"th"),s.Bc(4,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Tb(5,"th"),s.Bc(6,"Lo\u1ea1i xe"),s.Sb(),s.Tb(7,"th"),s.Bc(8,"T\xe0i x\u1ebf"),s.Sb(),s.Tb(9,"th"),s.Bc(10,"Ng\xe0y \u0111i"),s.Sb(),s.Tb(11,"th"),s.Bc(12,"C\xf4ng t\xe1c"),s.Sb(),s.Tb(13,"th",35),s.Tb(14,"i",36),s.bc("click",(function(){return s.tc(t),s.ec().ngOnInit()})),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(15,"tbody"),s.zc(16,ot,18,11,"tr",37),s.Sb(),s.Sb()}if(2&t){const t=s.ec();s.Cb(16),s.kc("ngForOf",t.dbList)}}function bt(t,e){if(1&t&&(s.Tb(0,"span",49),s.Bc(1),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.Cc(t.vehicleSelected.label)}}function at(t,e){1&t&&s.Ob(0,"input",50)}function lt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Tb(6,"button",31),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).selectVehicle(i)})),s.Bc(7,"Ch\u1ecdn"),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.type),s.Cb(2),s.Cc(t.label)}}function ht(t,e){if(1&t&&(s.Tb(0,"table",33),s.Tb(1,"thead",51),s.Tb(2,"tr"),s.Tb(3,"th"),s.Bc(4,"Lo\u1ea1i xe"),s.Sb(),s.Tb(5,"th"),s.Bc(6,"Bi\u1ec3n s\u1ed1"),s.Sb(),s.Ob(7,"th"),s.Sb(),s.Sb(),s.Tb(8,"tbody"),s.zc(9,lt,8,2,"tr",37),s.Sb(),s.Sb()),2&t){const t=s.ec();s.Cb(9),s.kc("ngForOf",t.vehicleList)}}function dt(t,e){if(1&t&&(s.Tb(0,"span",49),s.Bc(1),s.Sb()),2&t){const t=s.ec();s.Cb(1),s.Cc(t.userSelected.user_Id.fullName)}}function ut(t,e){1&t&&s.Ob(0,"input",52)}function pt(t,e){if(1&t){const t=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Bc(2),s.Sb(),s.Tb(3,"td"),s.Bc(4),s.Sb(),s.Tb(5,"td"),s.Tb(6,"button",31),s.bc("click",(function(){s.tc(t);const i=e.$implicit;return s.ec(2).selectDriver(i)})),s.Bc(7,"Ch\u1ecdn"),s.Sb(),s.Sb(),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(2),s.Cc(t.user_Id.fullName||"Ch\u01b0a khai b\xe1o"),s.Cb(2),s.Cc(t.level)}}function mt(t,e){if(1&t&&(s.Tb(0,"table",33),s.Tb(1,"thead",51),s.Tb(2,"tr"),s.Tb(3,"th"),s.Bc(4,"H\u1ecd v\xe0 t\xean"),s.Sb(),s.Tb(5,"th"),s.Bc(6,"H\u1ea1ng b\u1eb1ng l\xe1i"),s.Sb(),s.Ob(7,"th"),s.Sb(),s.Sb(),s.Tb(8,"tbody"),s.zc(9,pt,8,2,"tr",37),s.Sb(),s.Sb()),2&t){const t=s.ec();s.Cb(9),s.kc("ngForOf",t.userList)}}const gt=function(t){return{loading:t}},ft=[{path:"",component:H},{path:"quanlyxe",component:H},{path:"quanlydangkyxe",component:$},{path:"dangkyxe",component:D},{path:"dangkyxe/token/:token",component:P},{path:"quyettoan",component:v},{path:"hansudung/:id",component:et},{path:"hansudung",component:et},{path:"duyetxe",component:(()=>{class t{constructor(t,e){this.plus=t,this.fb=e,this.api="accept/",this.loading=!0,this.dbList=[],this.userList=[],this.vehicleList=[],this.userSelected=null,this.vehicleSelected=null,this.orderSelected=null,this.admin=this.plus.isAdmin(),this.from=localStorage.getItem("usrInfo"),this.main=this.fb.group({_id:[],vehicleId:[,[a.q.required]],driverId:[,[a.q.required]],how:[,[a.q.required]],todo:[,[a.q.required]],timeGo:[,[]],dateGo:[,[a.q.required]],timeBack:[,[]],dayBack:[,[a.q.required]],pointGo:[,[a.q.required]],pointDes:[,[a.q.required]],contact:[,[]],note:["",a.q.maxLength(100)]}),this.searchForm=this.fb.group({what:["",[a.q.minLength(4),a.q.maxLength(100)]]}),this.searchUser=this.fb.group({what:["",[a.q.minLength(4),a.q.maxLength(100)]]}),this.searchVehicle=this.fb.group({what:["",[a.q.minLength(4),a.q.maxLength(100)]]})}ngOnInit(){this.get(),this.findUser(),this.findVehicle(),this.findOrder()}get(){this.plus.httpGet(this.api+"1").subscribe(t=>{this.dbList=t,this.plus.alertToasrt(t),this.loading=!1})}findOrder(){this.searchForm.valid&&this.searchForm.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("accept/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.dbList=t)}))})}findVehicle(){this.searchVehicle.valid&&this.searchVehicle.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(this.loading=!0,t.what=this.plus.removeAccents(t.what),this.plus.httpPost("vehicle/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),t.length>0&&(this.vehicleList=t)}))})}findUser(){this.searchUser.valid&&this.searchUser.valueChanges.pipe(Object(l.a)(1500)).subscribe(t=>{console.log(t),t.what&&t.what.length>3&&(t.what=this.plus.removeAccents(t.what),this.loading=!0,this.plus.httpPost("driver/find",t).subscribe(t=>{this.loading=!1,this.plus.alertToasrt(t),this.userList=t}))})}selectDriver(t){this.userSelected=t,this.userList=[],console.log(t),this.main.controls.driverId.setValue(t.user_Id._id)}selectVehicle(t){this.vehicleSelected=t,this.vehicleList=[],console.log(t),this.main.controls.vehicleId.setValue(t._id)}changeStatus(t){this.plus.httpPut("order",{_id:t._id,orderStatus:0}).subscribe(t=>{this.plus.alertToasrt(t)})}editItem(t){console.log(t),this.orderSelected=t,this.main.patchValue(t),this.main.controls.vehicleId.setValue(t.vehicleId._id),this.main.controls.driverId.setValue(t.driverId._id),this.plus.clickBtn("openModal")}reset(){this.plus.clickBtn("closeModal"),this.main.reset(),this.searchForm.reset(),this.searchUser.reset(),this.searchVehicle.reset(),this.orderSelected=null,this.userSelected=null,this.vehicleSelected=null}submit(){const t=this.plus.addKeyWord(this.main.value);console.log(t),this.plus.httpPut("order",t).subscribe(t=>{this.plus.alertToasrt(t),this.plus.clickBtn("closeModal")})}accept(t,e){console.log(t);const i={title:`Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}.`,email:t.driverId.email,message:`<h4>Th\xf4ng b\xe1o c\xf4ng t\xe1c ng\xe0y ${this.plus.dateToDMY(t.dateGo)}:</h4>\n      <h4>Lo\u1ea1i xe: ${t.vehicleId.type} - ${t.vehicleId.label}.</h4>\n      <h4>Gi\u1edd \u0111i: ${t.timeGo}.</h4>\n      <h4>C\xf4ng t\xe1c: ${t.todo}.</h4>\n      <h4>\u0110\u1ecba \u0111i\u1ec3m: ${t.pointDes}.</h4>\n      <h4>Li\xean h\u1ec7: ${t.contact.join(", ")}.</h4>\n      `,t0k3n:{user:"tckt.dlxl@gmail.com",pass:"pdhorsgfplhxhecj"}};1===t.orderStatus?(this.plus.alertToasrt({war:"B\u1ea1n \u0111\xe3 duy\u1ec7t xe n\xe0y!"}),this.get()):(this.plus.httpPost(this.api,{id:t._id,orderStatus:1}).subscribe(t=>{this.dbList[e].orderStatus=1,this.plus.alertToasrt(t)}),console.log(i),this.plus.sendMail(i).subscribe(e=>Object(it.__awaiter)(this,void 0,void 0,(function*(){e.email&&(this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho l\xe1i xe"}),yield this.plus.sleep(5e3),i.email=t.userId.email,this.plus.sendMail(i).subscribe(t=>{this.plus.alertToasrt({msg:"\u0110\xe3 g\u1eedi mail cho ng\u01b0\u1eddi \u0111\u0103ng k\xfd xe"})}))}))))}download(t){JSON.parse(localStorage.getItem("usrInfo")).unit||this.plus.alertToasrt({err:"B\u1ea1n c\u1ea7n khai b\xe1o th\xeam th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"}),console.log(t);const e=Object.assign({},t);e.dateGo=this.plus.dateToDMY(e.dateGo),e.dayBack=this.plus.dateToDMY(e.dayBack)}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(a.c))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-acception"]],decls:66,vars:14,consts:[[1,"form-group",3,"formGroup"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin b\u1ea1n c\u1ea7n t\xecm","formControlName","what",1,"form-control",3,"ngClass","change"],["class","table table-hover",4,"ngIf"],["type","button","id","openModal","hidden","","data-toggle","modal","data-target","#regModal",1,"btn","btn-primary","btn-lg"],["id","regModal","tabindex","-1","role","dialog","aria-labelledby","modelTitleId","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary"],[1,"modal-title","text-center","text-white"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[3,"formGroup"],[1,"form-group"],["class","text-danger",4,"ngIf"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"vehicleList"],["type","text","class","form-control","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",4,"ngIf"],[1,"userList"],["type","text","hidden","","formControlName","_id",1,"form-control"],[1,"row","form-group"],[1,"col-sm-4"],[1,"col-sm-8"],["type","number","formControlName","how",1,"form-control"],["rows","2","formControlName","todo",1,"form-control"],["type","text","formControlName","timeGo",1,"form-control"],["rows","3","formControlName","note",1,"form-control"],[1,"modal-footer"],["type","button","id","closeModal","data-dismiss","modal",1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-floppy-o"],[1,"table","table-hover"],[1,"thead-default"],[1,"text-center","text-primary"],[1,"fa","fa-refresh",3,"click"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-warning mx-1","title","Duy\u1ec7t",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success mx-1",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#modelId",1,"btn","btn-outline-primary","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-print","text-info"],["type","button","class","btn btn-outline-danger mx-1",3,"click",4,"ngIf"],["type","button","title","Duy\u1ec7t",1,"btn","btn-outline-warning","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-check"],["type","button",1,"btn","btn-outline-success","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button",1,"btn","btn-outline-danger","mx-1",3,"click"],[1,"fa","fa-trash","text-danger"],[1,"text-danger"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin xe c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"],[1,"thead-inverse"],["type","text","placeholder","Nh\u1eadp th\xf4ng tin t\xe0i x\u1ebf c\u1ea7n \u0111\u1ed5i","formControlName","what",1,"form-control"]],template:function(t,e){1&t&&(s.Tb(0,"form",0),s.Tb(1,"input",1),s.bc("change",(function(){return e.findOrder()})),s.Sb(),s.Sb(),s.zc(2,rt,17,1,"table",2),s.Ob(3,"button",3),s.Tb(4,"div",4),s.Tb(5,"div",5),s.Tb(6,"div",6),s.Tb(7,"div",7),s.Tb(8,"h5",8),s.Bc(9,"Hi\u1ec7u ch\u1ec9nh xe \u0111\u0103ng k\xfd"),s.Sb(),s.Tb(10,"button",9),s.bc("click",(function(){return e.reset()})),s.Tb(11,"span",10),s.Bc(12,"\xd7"),s.Sb(),s.Sb(),s.Sb(),s.Tb(13,"div",11),s.Tb(14,"div",12),s.Tb(15,"form",13),s.Tb(16,"div",14),s.Tb(17,"h6"),s.Bc(18,"\u0110\u1ed5i xe: "),s.zc(19,bt,2,1,"span",15),s.Sb(),s.zc(20,at,1,0,"input",16),s.Sb(),s.Tb(21,"div",17),s.zc(22,ht,10,1,"table",2),s.Sb(),s.Sb(),s.Tb(23,"form",13),s.Tb(24,"div",14),s.Tb(25,"h6"),s.Bc(26,"\u0110\u1ed5i t\xe0i x\u1ebf: "),s.zc(27,dt,2,1,"span",15),s.Sb(),s.zc(28,ut,1,0,"input",18),s.Sb(),s.Tb(29,"div",19),s.zc(30,mt,10,1,"table",2),s.Sb(),s.Sb(),s.Tb(31,"form",13),s.Ob(32,"input",20),s.Tb(33,"div",21),s.Tb(34,"div",22),s.Tb(35,"h6"),s.Bc(36,"S\u1ed1 ng\u01b0\u1eddi \u0111i:"),s.Sb(),s.Sb(),s.Tb(37,"div",23),s.Ob(38,"input",24),s.Sb(),s.Sb(),s.Ob(39,"hr"),s.Tb(40,"div",21),s.Tb(41,"div",22),s.Tb(42,"h6"),s.Bc(43,"C\xf4ng t\xe1c:"),s.Sb(),s.Sb(),s.Tb(44,"div",23),s.Ob(45,"textarea",25),s.Sb(),s.Sb(),s.Ob(46,"hr"),s.Tb(47,"div",21),s.Tb(48,"div",22),s.Tb(49,"h6"),s.Bc(50,"Gi\u1edd \u0111i:"),s.Sb(),s.Sb(),s.Tb(51,"div",23),s.Ob(52,"input",26),s.Sb(),s.Sb(),s.Ob(53,"hr"),s.Tb(54,"div",21),s.Tb(55,"div",22),s.Tb(56,"h6"),s.Bc(57,"L\u1eddi nh\u1eafn cho l\xe1i xe"),s.Sb(),s.Sb(),s.Tb(58,"div",23),s.Ob(59,"textarea",27),s.Sb(),s.Sb(),s.Ob(60,"hr"),s.Sb(),s.Sb(),s.Sb(),s.Tb(61,"div",28),s.Tb(62,"button",29),s.bc("click",(function(){return e.reset()})),s.Ob(63,"i",30),s.Sb(),s.Tb(64,"button",31),s.bc("click",(function(){return e.submit()})),s.Ob(65,"i",32),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.kc("formGroup",e.searchForm),s.Cb(1),s.kc("ngClass",s.oc(12,gt,e.loading)),s.Cb(1),s.kc("ngIf",e.dbList.length>0),s.Cb(13),s.kc("formGroup",e.searchVehicle),s.Cb(4),s.kc("ngIf",e.vehicleSelected),s.Cb(1),s.kc("ngIf",!e.vehicleSelected),s.Cb(2),s.kc("ngIf",e.vehicleList.length>0),s.Cb(1),s.kc("formGroup",e.searchUser),s.Cb(4),s.kc("ngIf",e.userSelected),s.Cb(1),s.kc("ngIf",!e.userSelected),s.Cb(2),s.kc("ngIf",e.userList.length>0),s.Cb(1),s.kc("formGroup",e.main))},directives:[a.s,a.j,a.e,a.b,a.i,a.d,n.k,n.m,a.m,n.l],pipes:[n.d],styles:[""]}),t})()},{path:"taixe",component:$}];let St=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[C.e.forChild(ft)],C.e]}),t})(),Tt=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[n.b,St,a.n,a.f]]}),t})()}}]);